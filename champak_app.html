<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no">
<title>Champak Comics</title>
<link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;700;800&family=Lilita+One&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent;}
html,body{height:100%;overflow:hidden;}
body{font-family:'Baloo 2',cursive;background:var(--bg);color:var(--text);transition:background .3s,color .3s;}
:root{--a:#FF6B00;--a2:#FF4400;--s:#CC3300;--p:#FFD700;--p2:#FFC200;--bd:#E8A800;--bg:#FFF5C0;--nav:#FFE566;--card:#fff;--text:#333;--sub:#888;--h1:#CC2200;--h2:#884400;--h3:#886600;--tab:#FF4400;}
body.theme-blue{--a:#1565C0;--a2:#0D47A1;--s:#01579B;--p:#4FC3F7;--p2:#0288D1;--bd:#0277BD;--bg:#E3F2FD;--nav:#B3E5FC;--h1:#0D47A1;--h2:#1565C0;--h3:#1976D2;--tab:#1565C0;}
body.theme-green{--a:#2E7D32;--a2:#1B5E20;--s:#1B5E20;--p:#A5D6A7;--p2:#43A047;--bd:#2E7D32;--bg:#E8F5E9;--nav:#C8E6C9;--h1:#1B5E20;--h2:#2E7D32;--h3:#388E3C;--tab:#2E7D32;}
body.theme-purple{--a:#6A1B9A;--a2:#4A148C;--s:#4A148C;--p:#CE93D8;--p2:#8E24AA;--bd:#6A1B9A;--bg:#F3E5F5;--nav:#E1BEE7;--h1:#4A148C;--h2:#6A1B9A;--h3:#7B1FA2;--tab:#6A1B9A;}
body.theme-pink{--a:#C2185B;--a2:#880E4F;--s:#880E4F;--p:#F48FB1;--p2:#E91E63;--bd:#C2185B;--bg:#FCE4EC;--nav:#F8BBD0;--h1:#880E4F;--h2:#C2185B;--h3:#D81B60;--tab:#C2185B;}
body.dark{--bg:#12121e;--card:#1e1e30;--text:#e8e0ff;--sub:#888;}
body.dark .app-hdr,body.dark .home-hdr{background:linear-gradient(135deg,#1e1e30,#12121e)!important;border-color:#333358!important;}
body.dark #bNav{background:linear-gradient(180deg,#1e1e30,#12121e)!important;border-color:#333358!important;}
body.dark .nav-ico:not(.act-ico){background:rgba(255,255,255,.07)!important;}
body.dark .lcard,body.dark .acard,body.dark .game-card,body.dark .topic-card,body.dark .lrn-card,body.dark .ttt-cell,body.dark .mem-card-inner{background:#1e1e30!important;border-color:#333358!important;}
body.dark .cat-tabs,body.dark .search-bar,body.dark .streak-bar,body.dark .sl-info,body.dark .ludo-info,body.dark .sett-group,body.dark .sett-row,body.dark .fb-form,body.dark .quiz-question,body.dark .q-opt,body.dark .msg-item,body.dark .notif-panel{background:#1e1e30!important;border-color:#333358!important;}
body.dark .fb-input,body.dark .fb-textarea{background:#12121e!important;color:#e8e0ff!important;border-color:#333358!important;}
body.dark .lcard-name,body.dark .acard-name,body.dark .sett-label,body.dark .sec-title,body.dark .game-title,body.dark .topic-title,body.dark .lrn-w,body.dark .q-text,body.dark .lrn-n{color:#e8e0ff!important;}
body.dark .xp-bar-bg{background:#333358!important;}
.page{display:none;position:fixed;inset:0;flex-direction:column;overflow:hidden;}
.page.active{display:flex;}

/* ANIMATIONS */
@keyframes cin{from{opacity:0;transform:translateY(14px)}to{opacity:1;transform:translateY(0)}}
@keyframes pop{0%{transform:scale(0)}65%{transform:scale(1.18)}100%{transform:scale(1)}}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@keyframes spin{to{transform:rotate(360deg)}}
@keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-8px)}}
@keyframes shimmer{0%{left:-80%}65%,100%{left:140%}}
@keyframes btnGlow{0%,100%{box-shadow:0 6px 0 #A03000,0 9px 22px rgba(180,60,0,.4)}50%{box-shadow:0 6px 0 #A03000,0 14px 34px rgba(255,110,0,.7)}}
@keyframes confettiFall{0%{transform:translateY(-20px) rotate(0deg);opacity:1}100%{transform:translateY(110vh) rotate(720deg);opacity:0}}
@keyframes diceRoll{0%,100%{transform:rotate(0)}25%{transform:rotate(-16deg)}75%{transform:rotate(16deg)}}
@keyframes lvlUp{0%{transform:scale(.5) translateY(20px);opacity:0}30%{transform:scale(1.3) translateY(0);opacity:1}70%{transform:scale(1.1);opacity:1}100%{transform:scale(1) translateY(-30px);opacity:0}}
@keyframes ripple-anim{to{transform:scale(4);opacity:0}}
@keyframes slideUp{from{transform:translateY(100%);opacity:0}to{transform:translateY(0);opacity:1}}
@keyframes heartBeat{0%,100%{transform:scale(1)}14%{transform:scale(1.3)}28%{transform:scale(1)}42%{transform:scale(1.3)}70%{transform:scale(1)}}
@keyframes shake{0%,100%{transform:translateX(0)}25%{transform:translateX(-6px)}75%{transform:translateX(6px)}}
@keyframes glow{0%,100%{box-shadow:0 0 5px var(--a)}50%{box-shadow:0 0 20px var(--a),0 0 40px var(--a)}}

/* RIPPLE */
.ripple-wrap{position:relative;overflow:hidden;}
.ripple{position:absolute;border-radius:50%;background:rgba(255,255,255,.35);transform:scale(0);animation:ripple-anim .55s linear;pointer-events:none;}

/* SPLASH */
#pgSplash{transition:opacity .8s;z-index:999;background:#ffd84d;}
.sp-img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;object-position:center top;}
.sp-btn-wrap{position:absolute;bottom:22%;left:50%;transform:translateX(-50%);z-index:10;width:72%;max-width:290px;}
.sp-btn{width:100%;padding:15px 20px;background:linear-gradient(180deg,#FFAA00,#FF6A00 55%,#E84500);color:#fff;font-family:'Baloo 2',cursive;font-size:25px;font-weight:800;border:none;border-radius:50px;cursor:pointer;box-shadow:0 6px 0 #A03000;display:flex;align-items:center;justify-content:center;gap:10px;position:relative;overflow:hidden;animation:btnGlow 2s ease-in-out infinite;}
.sp-btn::after{content:'';position:absolute;top:0;left:-80%;width:55%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.38),transparent);animation:shimmer 2.6s ease-in-out infinite;}
.sp-btn:active{transform:translateY(4px);}

/* ONBOARD */
#pgOnboard{background:linear-gradient(160deg,#FFE566,#FFD000 50%,#8DC42A);align-items:center;justify-content:flex-start;padding:30px 24px;overflow-y:auto;}
#pgOnboard::-webkit-scrollbar{width:0;}
.ob-inner{width:100%;max-width:340px;margin:0 auto;display:flex;flex-direction:column;align-items:center;gap:14px;padding-bottom:20px;}
.ob-title{font-family:'Lilita One',cursive;font-size:26px;color:#CC2200;text-align:center;margin-top:10px;}
.ob-sub{font-size:13px;color:#665500;font-weight:700;text-align:center;}
.ob-input{width:100%;padding:13px 16px;border-radius:14px;border:3px solid #E8A800;font-family:'Baloo 2',cursive;font-size:17px;font-weight:700;color:#333;outline:none;text-align:center;background:#fff;}
.char-lbl{font-family:'Lilita One',cursive;font-size:15px;color:#CC2200;align-self:flex-start;}
.char-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:9px;width:100%;}
.char-btn{background:#fff;border-radius:14px;padding:10px 6px;text-align:center;border:3px solid transparent;cursor:pointer;transition:all .15s;box-shadow:0 3px 8px rgba(0,0,0,.1);}
.char-btn.sel{border-color:var(--a,#FF6B00);background:rgba(255,107,0,.08);transform:scale(1.05);}
.char-btn:active{transform:scale(.93);}
.char-btn-e{font-size:30px;}
.char-btn-n{font-size:10px;font-weight:800;color:#555;margin-top:2px;}
.ob-btn{width:100%;padding:14px;background:linear-gradient(135deg,#FF7700,#FF4400);color:#fff;font-family:'Lilita One',cursive;font-size:20px;border:none;border-radius:16px;box-shadow:0 5px 0 #CC3300;cursor:pointer;}
.ob-btn:active{transform:translateY(3px);}

/* HEADERS */
.app-hdr,.home-hdr{background:linear-gradient(135deg,var(--p),var(--p2));padding:10px 12px;display:flex;align-items:center;gap:9px;border-bottom:3px solid var(--bd);box-shadow:0 3px 10px rgba(0,0,0,.12);flex-shrink:0;}
.hdr-avatar{width:48px;height:48px;border-radius:14px;background:linear-gradient(135deg,var(--a),var(--a2));border:2.5px solid rgba(255,255,255,.5);display:flex;align-items:center;justify-content:center;font-size:26px;cursor:pointer;flex-shrink:0;box-shadow:0 3px 8px rgba(0,0,0,.18);}
.hdr-uname{font-family:'Lilita One',cursive;font-size:17px;color:var(--h1);line-height:1.1;}
.hdr-rank{display:inline-flex;align-items:center;gap:4px;background:rgba(255,255,255,.45);border-radius:8px;padding:2px 8px;font-size:11px;font-weight:800;color:var(--h2);margin-top:2px;}
.hdr-app-name{font-family:'Lilita One',cursive;font-size:18px;color:var(--h2);}
.hdr-app-sub{font-size:9px;font-weight:700;color:var(--h3);}
.hdr-btn{background:rgba(255,255,255,.4);border:2px solid rgba(255,255,255,.55);color:var(--h2);width:36px;height:36px;border-radius:11px;font-size:16px;cursor:pointer;display:flex;align-items:center;justify-content:center;flex-shrink:0;position:relative;}
.hdr-back{background:rgba(255,255,255,.4);border:2px solid rgba(255,255,255,.55);color:var(--h2);width:36px;height:36px;border-radius:11px;font-size:17px;cursor:pointer;display:flex;align-items:center;justify-content:center;flex-shrink:0;}
.notif-dot{position:absolute;top:2px;right:2px;width:9px;height:9px;background:#FF3D00;border-radius:50%;border:1.5px solid var(--p);}

/* NOTIF PANEL */
.notif-panel{position:fixed;top:0;right:0;width:290px;max-width:88vw;height:100%;background:var(--card);z-index:900;box-shadow:-4px 0 20px rgba(0,0,0,.2);transform:translateX(100%);transition:transform .3s;display:flex;flex-direction:column;}
.notif-panel.open{transform:translateX(0);}
.notif-hdr{background:linear-gradient(135deg,var(--a),var(--a2));padding:13px 14px;display:flex;align-items:center;justify-content:space-between;flex-shrink:0;}
.notif-close{background:rgba(255,255,255,.25);border:none;color:#fff;width:28px;height:28px;border-radius:7px;font-size:14px;cursor:pointer;}
.notif-list{flex:1;overflow-y:auto;padding:7px;}
.notif-list::-webkit-scrollbar{width:0;}
.notif-item{padding:10px 11px;border-bottom:1px solid rgba(0,0,0,.06);display:flex;gap:9px;animation:cin .3s ease;}
.notif-item.reply-msg{background:linear-gradient(135deg,rgba(255,200,0,.1),rgba(255,107,0,.06));border-left:3px solid var(--a);border-radius:0 8px 8px 0;}
.notif-empty{text-align:center;padding:40px 14px;color:var(--sub);font-size:13px;font-weight:700;}
.notif-ov{position:fixed;inset:0;background:rgba(0,0,0,.4);z-index:899;display:none;}
.notif-ov.show{display:block;}

/* MESSAGES (inbox) */
.msg-item{background:var(--card);border-radius:13px;padding:12px 13px;margin-bottom:9px;border:2px solid rgba(255,200,0,.15);box-shadow:0 3px 8px rgba(0,0,0,.07);animation:cin .3s ease;}
.msg-item.from-dev{border-color:var(--a);background:linear-gradient(135deg,rgba(255,200,0,.06),rgba(255,107,0,.04));}
.msg-type-badge{display:inline-flex;align-items:center;gap:4px;padding:2px 9px;border-radius:8px;font-size:9px;font-weight:800;margin-bottom:6px;}
.msg-body{font-size:12px;font-weight:600;color:var(--text);line-height:1.55;}
.msg-meta{font-size:10px;color:var(--sub);margin-top:4px;}
.msg-reply{background:linear-gradient(135deg,rgba(255,107,0,.1),rgba(255,68,0,.07));border-radius:9px;padding:9px 11px;margin-top:8px;border-left:3px solid var(--a);}
.msg-reply-lbl{font-size:9px;font-weight:800;color:var(--a);margin-bottom:4px;}
.msg-reply-txt{font-size:12px;font-weight:600;color:var(--text);line-height:1.5;}

/* FAVS OVERLAY */
#favsOv{display:none;position:fixed;inset:0;z-index:800;background:rgba(0,0,0,.5);animation:fadeIn .2s ease;}
#favsOv.show{display:flex;flex-direction:column;}
.favs-panel{background:var(--bg);flex:1;margin-top:60px;border-radius:20px 20px 0 0;overflow:hidden;display:flex;flex-direction:column;animation:slideUp .3s ease;}
.favs-phdr{background:linear-gradient(135deg,var(--a),var(--a2));padding:13px 14px;display:flex;align-items:center;justify-content:space-between;}
.favs-px{background:rgba(255,255,255,.25);border:none;color:#fff;width:30px;height:30px;border-radius:8px;font-size:16px;cursor:pointer;}
.favs-grid{display:grid;grid-template-columns:1fr 1fr;gap:9px;padding:12px;overflow-y:auto;flex:1;}
.favs-grid::-webkit-scrollbar{width:0;}
.fav-card{background:var(--card);border-radius:14px;overflow:hidden;box-shadow:0 3px 9px rgba(0,0,0,.09);cursor:pointer;border:2px solid rgba(255,200,0,.12);}
.fav-card:active{transform:scale(.95);}
.fav-thumb{height:130px;position:relative;overflow:hidden;background:linear-gradient(135deg,#FF9500,#FF6B00);}
.fav-thumb img{position:absolute;inset:-2px;width:calc(100% + 4px);height:calc(100% + 4px);object-fit:cover;object-position:center;}
.fav-name{font-size:10px;font-weight:700;color:var(--text);padding:6px 8px 4px;line-height:1.3;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;}
.fav-rm{width:calc(100% - 14px);margin:0 7px 7px;padding:5px;background:linear-gradient(135deg,#E91E63,#C2185B);color:#fff;border:none;border-radius:8px;font-family:'Lilita One',cursive;font-size:10px;cursor:pointer;}

/* HOME */
#pgHome{background:var(--bg);}
#homeScroll{flex:1;overflow-y:auto;padding-bottom:68px;}
#homeScroll::-webkit-scrollbar{width:0;}
.ann-bar{background:linear-gradient(135deg,var(--a),var(--a2));padding:8px 13px;display:flex;align-items:center;gap:7px;flex-shrink:0;}
.ann-x{background:rgba(255,255,255,.25);border:none;color:#fff;width:22px;height:22px;border-radius:6px;font-size:11px;cursor:pointer;}
.streak-bar{background:var(--card);margin:10px 13px 0;border-radius:13px;padding:9px 13px;display:flex;align-items:center;gap:9px;box-shadow:0 2px 7px rgba(0,0,0,.08);border:2px solid rgba(255,200,0,.2);}
.xp-bar-bg{height:6px;width:60px;background:#eee;border-radius:3px;overflow:hidden;}
.xp-bar-fill{height:100%;background:linear-gradient(90deg,var(--a),var(--a2));border-radius:3px;transition:width .5s;}
.hero-banner{margin:10px 13px 8px;border-radius:16px;overflow:hidden;border:3px solid var(--bd);box-shadow:0 5px 0 rgba(0,0,0,.12);cursor:pointer;}
.hero-img{height:140px;overflow:hidden;background:#FFB300;}
.hero-img img{width:100%;height:100%;object-fit:cover;}
.hero-foot{background:linear-gradient(135deg,#4A9A18,#5BB320);padding:8px 13px;display:flex;align-items:center;justify-content:space-between;}
.cotd-wrap{margin:0 13px 8px;}
.cotd-lbl{font-family:'Lilita One',cursive;font-size:13px;color:var(--a);margin-bottom:5px;}
.cotd-card{background:linear-gradient(135deg,var(--a),var(--a2));border-radius:13px;padding:10px;display:flex;align-items:center;gap:11px;box-shadow:0 4px 0 var(--s);cursor:pointer;}
.cotd-thumb{width:52px;height:65px;border-radius:8px;overflow:hidden;flex-shrink:0;background:#ffbb77;}
.cotd-thumb img{width:100%;height:100%;object-fit:cover;object-position:center top;}
.cotd-btn{background:rgba(255,255,255,.22);border:2px solid rgba(255,255,255,.35);color:#fff;font-family:'Lilita One',cursive;font-size:11px;padding:5px 10px;border-radius:8px;cursor:pointer;white-space:nowrap;}
.search-wrap{padding:0 13px 8px;}
.search-bar{display:flex;align-items:center;gap:8px;background:var(--card);border-radius:12px;padding:9px 12px;border:2px solid rgba(255,200,0,.25);box-shadow:0 2px 6px rgba(0,0,0,.07);}
.search-bar input{flex:1;border:none;outline:none;font-family:'Baloo 2',cursive;font-size:13px;font-weight:700;color:var(--text);background:transparent;}
.search-bar input::placeholder{color:#bbb;font-weight:400;}
.sec-hdr{display:flex;align-items:center;justify-content:space-between;padding:4px 13px 7px;}
.sec-title{font-family:'Lilita One',cursive;font-size:15px;color:var(--text);}
.see-all{font-size:11px;color:var(--a);font-weight:700;background:rgba(255,107,0,.1);padding:4px 9px;border-radius:9px;cursor:pointer;border:none;font-family:'Baloo 2',cursive;}

/* CARDS */
.lib-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;padding:0 13px;}
.lcard{background:var(--card);border-radius:14px;overflow:hidden;box-shadow:0 4px 12px rgba(0,0,0,.1);cursor:pointer;border:2px solid rgba(255,200,0,.12);animation:cin .4s ease both;position:relative;}
.lcard:active{transform:scale(.95);}
.lcard-thumb{height:145px;position:relative;overflow:hidden;background:linear-gradient(135deg,#FF9500,#FF6B00);}
.lcard-thumb img{position:absolute;inset:-2px;width:calc(100% + 4px);height:calc(100% + 4px);object-fit:cover;object-position:center;}
.lcard-name{font-size:10px;font-weight:700;color:var(--text);padding:7px 9px 5px;line-height:1.3;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;}
.lread-btn{width:calc(100% - 18px);margin:0 9px 9px;padding:6px;background:linear-gradient(135deg,var(--a),var(--a2));color:#fff;border:none;border-radius:9px;font-family:'Lilita One',cursive;font-size:11px;box-shadow:0 3px 0 var(--s);cursor:pointer;display:block;}
.cbadge{position:absolute;top:7px;font-size:9px;font-weight:800;padding:2px 7px;border-radius:7px;z-index:2;}
.bl{left:7px;}.br{right:7px;}
.b-hi{background:#138808;color:#fff;}.b-en{background:#003087;color:#fff;}
.b-new{background:#FF3D00;color:#fff;}.b-pin{background:#FFD700;color:#8B1A00;}

/* BOTTOM NAV */
#bNav{position:fixed;bottom:0;left:0;right:0;height:62px;background:linear-gradient(180deg,var(--nav),var(--p));border-top:3px solid var(--bd);display:flex;align-items:center;box-shadow:0 -3px 10px rgba(0,0,0,.12);z-index:50;}
.nav-item{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1px;cursor:pointer;padding:3px 2px;position:relative;}
.nav-ico{width:36px;height:36px;border-radius:11px;display:flex;align-items:center;justify-content:center;font-size:17px;transition:transform .15s;}
.act-ico{background:linear-gradient(135deg,var(--a),var(--a2));box-shadow:0 3px 8px rgba(255,100,0,.35);}
.nav-item:not([data-active]) .nav-ico{background:rgba(255,255,255,.5);}
.nav-label{font-size:9px;font-weight:700;color:var(--h2);}
.nav-item[data-active] .nav-label{color:var(--a2);}
.nav-item:active .nav-ico{transform:scale(.85);}
.nav-badge{position:absolute;top:1px;right:calc(50% - 21px);background:#FF3D00;color:#fff;font-size:8px;font-weight:800;min-width:14px;height:14px;border-radius:7px;display:flex;align-items:center;justify-content:center;padding:0 3px;border:2px solid var(--bg);}

/* COMICS PAGE */
#pgSeeAll{background:var(--bg);}
.cat-tabs{display:flex;background:var(--card);padding:0 13px;border-bottom:2px solid rgba(255,200,0,.2);flex-shrink:0;}
.cat-tab{flex-shrink:0;padding:10px 14px 9px;font-family:'Lilita One',cursive;font-size:13px;color:#aaa;background:transparent;border:none;cursor:pointer;position:relative;}
.cat-tab.on{color:var(--tab);}
.cat-tab.on::after{content:'';position:absolute;bottom:0;left:0;right:0;height:3px;background:var(--tab);border-radius:3px 3px 0 0;}
.scr{flex:1;overflow-y:auto;}
.scr::-webkit-scrollbar{width:0;}
.all-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;padding:12px 13px 8px;}
.acard{background:var(--card);border-radius:16px;overflow:hidden;box-shadow:0 4px 12px rgba(0,0,0,.09);cursor:pointer;border:2px solid rgba(255,200,0,.1);animation:cin .4s ease both;position:relative;}
.acard:active{transform:scale(.96);}
.acard-thumb{height:168px;position:relative;overflow:hidden;background:linear-gradient(135deg,#FF9500,#FF6B00);}
.acard-thumb img{position:absolute;inset:-2px;width:calc(100% + 4px);height:calc(100% + 4px);object-fit:cover;object-position:center;}
.acard-ov{position:absolute;inset:0;background:linear-gradient(to bottom,transparent 55%,rgba(0,0,0,.4));}
.acard-date{position:absolute;top:7px;right:7px;background:#FFE100;color:#8B1A00;font-size:9px;font-weight:800;padding:2px 6px;border-radius:6px;}
.acard-pages{position:absolute;bottom:7px;left:7px;background:rgba(0,0,0,.55);color:#fff;font-size:9px;padding:2px 5px;border-radius:5px;}
.acard-info{padding:9px 10px 10px;}
.acard-name{color:var(--text);font-size:12px;font-weight:800;line-height:1.3;margin-bottom:7px;}
.aread-btn{flex:1;padding:7px;background:linear-gradient(135deg,var(--a),var(--a2));color:#fff;border:none;border-radius:8px;font-family:'Lilita One',cursive;font-size:11px;box-shadow:0 3px 0 var(--s);cursor:pointer;}
.no-items{grid-column:1/-1;text-align:center;padding:40px 18px;color:#bbb;font-size:14px;font-weight:700;line-height:1.8;}

/* RANK BANNER */
.rank-banner{background:linear-gradient(135deg,var(--a),var(--a2));margin:10px 13px;border-radius:14px;padding:13px 16px;display:flex;align-items:center;gap:12px;box-shadow:0 4px 0 var(--s);}
.rank-char{font-size:38px;}
.rank-xp-bar-bg{height:7px;background:rgba(255,255,255,.25);border-radius:4px;overflow:hidden;flex:1;margin-top:4px;}
.rank-xp-bar-fill{height:100%;background:rgba(255,255,255,.85);border-radius:4px;transition:width .6s;}
.next-rank-txt{font-size:9px;color:rgba(255,255,255,.75);margin-top:2px;font-weight:600;}

/* GAMES */
#pgGames{background:var(--bg);}
.games-grid{display:grid;grid-template-columns:1fr 1fr;gap:11px;padding:13px;}
.game-card{background:var(--card);border-radius:17px;padding:18px 12px;text-align:center;box-shadow:0 4px 12px rgba(0,0,0,.09);cursor:pointer;border:2px solid rgba(255,200,0,.12);animation:cin .4s ease both;}
.game-card:active{transform:scale(.93);}
.game-ico{font-size:40px;margin-bottom:7px;}
.game-title{font-family:'Lilita One',cursive;font-size:14px;color:var(--text);margin-bottom:3px;}
.game-sub{font-size:10px;color:var(--sub);font-weight:600;}
.game-btn{width:100%;margin-top:9px;padding:8px;background:linear-gradient(135deg,var(--a),var(--a2));color:#fff;border:none;border-radius:10px;font-family:'Lilita One',cursive;font-size:12px;box-shadow:0 3px 0 var(--s);cursor:pointer;}

/* TTT */
#pgTTT{background:var(--bg);}
.ttt-wrap{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:16px;gap:13px;}
.ttt-status{font-family:'Lilita One',cursive;font-size:20px;color:var(--text);text-align:center;}
.ttt-board{display:grid;grid-template-columns:repeat(3,1fr);gap:7px;width:255px;}
.ttt-cell{height:80px;background:var(--card);border-radius:13px;border:3px solid rgba(255,200,0,.25);display:flex;align-items:center;justify-content:center;font-size:34px;cursor:pointer;box-shadow:0 3px 7px rgba(0,0,0,.08);transition:transform .1s;}
.ttt-cell:active{transform:scale(.91);}
.ttt-cell.x{color:#FF4400;}.ttt-cell.o{color:#0066CC;}
.ttt-cell.win{background:linear-gradient(135deg,#FFE566,#FFD700)!important;animation:pop .3s ease;}
.ttt-mode-wrap{display:flex;gap:8px;}
.ttt-mode-btn{padding:7px 15px;border-radius:10px;border:2px solid rgba(255,200,0,.3);background:var(--card);font-family:'Baloo 2',cursive;font-size:12px;font-weight:700;color:var(--text);cursor:pointer;}
.ttt-mode-btn.on{background:linear-gradient(135deg,var(--a),var(--a2));color:#fff;border-color:var(--a);}
.g-btn{padding:10px 20px;border:none;border-radius:12px;font-family:'Lilita One',cursive;font-size:14px;cursor:pointer;background:linear-gradient(135deg,var(--a),var(--a2));color:#fff;box-shadow:0 3px 0 var(--s);}

/* SNAKE LADDER */
#pgSnake{background:var(--bg);}
.sl-wrap{flex:1;overflow-y:auto;padding:10px 13px;display:flex;flex-direction:column;align-items:center;gap:9px;}
.sl-wrap::-webkit-scrollbar{width:0;}
.sl-board{display:grid;grid-template-columns:repeat(10,1fr);border:3px solid var(--bd);border-radius:8px;overflow:hidden;width:100%;max-width:360px;}
.sl-cell{aspect-ratio:1;display:flex;align-items:center;justify-content:center;font-size:7px;font-weight:800;position:relative;border:1px solid rgba(0,0,0,.07);}
.sl-er{background:#FFF9E6;}.sl-or{background:#FFF0CC;}
.sl-num{font-size:7px;font-weight:800;color:#888;position:absolute;top:1px;left:2px;}
.sl-token{width:13px;height:13px;border-radius:50%;position:absolute;display:flex;align-items:center;justify-content:center;font-size:8px;border:2px solid rgba(0,0,0,.2);z-index:5;}
.sl-info{width:100%;max-width:360px;background:var(--card);border-radius:13px;padding:11px 13px;box-shadow:0 3px 7px rgba(0,0,0,.08);}
.sl-players{display:flex;gap:7px;margin-bottom:9px;flex-wrap:wrap;}
.sl-player{flex:1;min-width:65px;padding:6px 8px;border-radius:9px;text-align:center;border:2px solid transparent;}
.sl-player.cur{border-color:var(--a);}
.dice-btn{width:100%;padding:10px;border:none;border-radius:11px;font-family:'Lilita One',cursive;font-size:15px;background:linear-gradient(135deg,var(--a),var(--a2));color:#fff;box-shadow:0 4px 0 var(--s);cursor:pointer;}
.dice-btn:active{transform:translateY(2px);}
.dice-btn.rolling{animation:diceRoll .4s ease;}
.sl-log{font-size:11px;color:var(--sub);font-weight:600;margin-top:6px;min-height:16px;}

/* MEMORY */
#pgMemory{background:var(--bg);}
.mem-wrap{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:13px;gap:10px;}
.mem-stats{display:flex;gap:18px;}
.mem-stat-num{font-family:'Lilita One',cursive;font-size:22px;color:var(--a);}
.mem-stat-lbl{font-size:10px;color:var(--sub);font-weight:700;}
.mem-board{display:grid;grid-template-columns:repeat(4,1fr);gap:7px;width:100%;max-width:330px;}
.mem-card{aspect-ratio:.74;perspective:600px;cursor:pointer;}
.mem-card-inner{width:100%;height:100%;position:relative;transition:transform .35s;transform-style:preserve-3d;border-radius:10px;}
.mem-card.flipped .mem-card-inner{transform:rotateY(180deg);}
.mem-card-front,.mem-card-back{position:absolute;inset:0;border-radius:10px;display:flex;align-items:center;justify-content:center;backface-visibility:hidden;-webkit-backface-visibility:hidden;}
.mem-card-front{background:linear-gradient(135deg,var(--a),var(--a2));font-size:20px;}
.mem-card-back{background:var(--card);font-size:24px;transform:rotateY(180deg);box-shadow:0 3px 7px rgba(0,0,0,.1);border:2px solid rgba(255,200,0,.2);}
.mem-card.matched .mem-card-back{background:linear-gradient(135deg,#E8F5E9,#C8E6C9);border-color:#81C784;}

/* LUDO */
#pgLudo{background:var(--bg);}
.ludo-wrap{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:12px;gap:10px;}
.ludo-board{width:100%;max-width:300px;aspect-ratio:1;position:relative;background:#fff;border:3px solid var(--bd);border-radius:8px;overflow:hidden;box-shadow:0 4px 12px rgba(0,0,0,.12);}
.ludo-zone{position:absolute;width:40%;height:40%;display:grid;grid-template-columns:1fr 1fr;gap:4px;padding:5px;border-radius:4px;}
.lzone-tl{top:0;left:0;background:#FF4444;}.lzone-tr{top:0;right:0;background:#4444FF;}
.lzone-bl{bottom:0;left:0;background:#44BB44;}.lzone-br{bottom:0;right:0;background:#FFD700;}
.ludo-home{width:100%;height:100%;border-radius:50%;background:rgba(255,255,255,.4);display:flex;align-items:center;justify-content:center;font-size:13px;cursor:pointer;border:2px solid rgba(255,255,255,.6);}
.ludo-ph{position:absolute;top:40%;left:0;width:100%;height:20%;background:repeating-linear-gradient(90deg,#f0f0f0,#f0f0f0 9.5%,#ddd 9.5%,#ddd 10%);}
.ludo-pv{position:absolute;top:0;left:40%;width:20%;height:100%;background:repeating-linear-gradient(0deg,#f0f0f0,#f0f0f0 9.5%,#ddd 9.5%,#ddd 10%);}
.ludo-ctr{position:absolute;top:40%;left:40%;width:20%;height:20%;background:linear-gradient(135deg,#FFD700,#FF6B00);display:flex;align-items:center;justify-content:center;font-size:14px;}
.ludo-info{width:100%;max-width:300px;background:var(--card);border-radius:13px;padding:10px 12px;box-shadow:0 3px 7px rgba(0,0,0,.08);}
.ludo-players{display:flex;gap:7px;margin-bottom:9px;}
.ludo-player{flex:1;padding:6px;border-radius:9px;text-align:center;border:2px solid transparent;}
.ludo-player.cur{border-color:var(--a);}

/* LEARN */
#pgLearn{background:var(--bg);}
.learn-scr{flex:1;overflow-y:auto;padding:12px 13px 68px;}
.learn-scr::-webkit-scrollbar{width:0;}
.age-title{font-family:'Lilita One',cursive;font-size:15px;color:var(--text);margin-bottom:9px;padding:0 2px;}
.learn-grid{display:grid;grid-template-columns:1fr 1fr;gap:9px;margin-bottom:14px;}
.topic-card{background:var(--card);border-radius:15px;padding:14px 10px;text-align:center;box-shadow:0 3px 10px rgba(0,0,0,.09);cursor:pointer;border:2px solid rgba(255,200,0,.12);animation:cin .4s ease both;}
.topic-card:active{transform:scale(.93);}
.topic-ico{font-size:36px;margin-bottom:5px;}
.topic-title{font-family:'Lilita One',cursive;font-size:13px;color:var(--text);margin-bottom:2px;}
.topic-sub{font-size:10px;color:var(--sub);font-weight:600;}
.topic-prog{height:5px;background:#eee;border-radius:3px;margin-top:7px;overflow:hidden;}

/* TOPIC + QUIZ */
#pgTopic{background:var(--bg);}
.topic-scr{flex:1;overflow-y:auto;padding:12px 13px 14px;}
.topic-scr::-webkit-scrollbar{width:0;}
.lrn-grid{display:grid;grid-template-columns:1fr 1fr;gap:9px;}
.lrn-card{background:var(--card);border-radius:15px;padding:12px 9px;text-align:center;box-shadow:0 3px 9px rgba(0,0,0,.08);cursor:pointer;animation:cin .3s ease both;border:2px solid rgba(255,200,0,.1);}
.lrn-card:active{transform:scale(.93);}
.lrn-e{font-size:42px;margin-bottom:5px;display:block;}
.lrn-w{font-family:'Lilita One',cursive;font-size:15px;color:var(--a);margin-bottom:2px;}
.lrn-n{font-size:10px;font-weight:700;color:var(--text);}
.quiz-start{width:100%;margin:12px 0 0;padding:13px;background:linear-gradient(135deg,var(--a),var(--a2));color:#fff;border:none;border-radius:13px;font-family:'Lilita One',cursive;font-size:17px;box-shadow:0 5px 0 var(--s);cursor:pointer;}
#pgQuiz{background:var(--bg);}
.quiz-wrap{flex:1;display:flex;flex-direction:column;padding:13px;gap:11px;}
.q-prog-bar{height:7px;background:#eee;border-radius:4px;overflow:hidden;}
.q-prog-fill{height:100%;background:linear-gradient(90deg,var(--a),var(--a2));border-radius:4px;transition:width .3s;}
.quiz-question{background:var(--card);border-radius:16px;padding:17px;text-align:center;box-shadow:0 4px 10px rgba(0,0,0,.08);}
.q-emoji{font-size:50px;margin-bottom:9px;display:block;}
.q-text{font-family:'Lilita One',cursive;font-size:17px;color:var(--text);}
.quiz-opts{display:grid;grid-template-columns:1fr 1fr;gap:9px;}
.q-opt{padding:12px 8px;background:var(--card);border:3px solid rgba(255,200,0,.2);border-radius:13px;font-family:'Baloo 2',cursive;font-size:13px;font-weight:700;color:var(--text);cursor:pointer;text-align:center;box-shadow:0 3px 7px rgba(0,0,0,.07);}
.q-opt:active{transform:scale(.93);}
.q-opt.correct{background:linear-gradient(135deg,#E8F5E9,#C8E6C9);border-color:#66BB6A;color:#1B5E20;}
.q-opt.wrong{background:linear-gradient(135deg,#FFEBEE,#FFCDD2);border-color:#EF9A9A;color:#B71C1C;}
.quiz-result{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;gap:11px;}

/* SETTINGS */
#pgSettings{background:var(--bg);}
.sett-scr{flex:1;overflow-y:auto;padding:13px;padding-bottom:76px;}
.sett-scr::-webkit-scrollbar{width:0;}
.user-profile-card{background:linear-gradient(135deg,var(--a),var(--a2));border-radius:18px;padding:16px;margin-bottom:16px;box-shadow:0 5px 0 var(--s);}
.user-pc-top{display:flex;align-items:center;gap:13px;margin-bottom:12px;}
.user-pc-av{width:60px;height:60px;border-radius:16px;background:rgba(255,255,255,.25);display:flex;align-items:center;justify-content:center;font-size:32px;border:2.5px solid rgba(255,255,255,.45);}
.user-pc-name{font-family:'Lilita One',cursive;font-size:22px;color:#fff;}
.user-pc-rank{display:inline-flex;align-items:center;gap:5px;background:rgba(255,255,255,.2);border-radius:10px;padding:3px 10px;font-size:12px;font-weight:800;color:#fff;margin-top:3px;}
.user-pc-stats{display:grid;grid-template-columns:1fr 1fr 1fr;gap:7px;}
.user-pc-stat{background:rgba(0,0,0,.12);border-radius:10px;padding:8px;text-align:center;}
.user-pc-stat-n{font-family:'Lilita One',cursive;font-size:18px;color:#FFE100;}
.user-pc-stat-l{font-size:9px;color:rgba(255,255,255,.75);font-weight:700;}
.sett-sec{font-family:'Lilita One',cursive;font-size:11px;color:var(--sub);letter-spacing:.8px;text-transform:uppercase;padding:0 2px 7px;}
.sett-group{background:var(--card);border-radius:14px;overflow:hidden;box-shadow:0 3px 8px rgba(0,0,0,.07);margin-bottom:15px;border:2px solid rgba(255,200,0,.1);}
.sett-row{display:flex;align-items:center;padding:11px 13px;border-bottom:1.5px solid rgba(0,0,0,.05);cursor:pointer;}
.sett-row:last-child{border-bottom:none;}
.sett-row:active{background:rgba(255,200,0,.07);}
.sett-ico{width:34px;height:34px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:16px;flex-shrink:0;margin-right:10px;}
.sett-label{font-size:13px;font-weight:700;color:var(--text);flex:1;}
.sett-val{font-size:10px;color:var(--sub);margin-top:1px;}
.sett-arr{color:#ccc;font-size:14px;}
.toggle{width:42px;height:23px;background:#ddd;border-radius:12px;position:relative;cursor:pointer;transition:background .25s;flex-shrink:0;}
.toggle.on{background:linear-gradient(135deg,var(--a),var(--a2));}
.toggle::after{content:'';position:absolute;top:3px;left:3px;width:17px;height:17px;background:#fff;border-radius:50%;transition:transform .25s;box-shadow:0 2px 4px rgba(0,0,0,.2);}
.toggle.on::after{transform:translateX(19px);}
.theme-row{padding:10px 13px;border-bottom:1.5px solid rgba(0,0,0,.05);}
.tdot{width:28px;height:28px;border-radius:50%;cursor:pointer;border:3px solid transparent;display:inline-block;margin-right:8px;}
.tdot.on{border-color:#333;box-shadow:0 0 0 2px #fff;}
.badges-wrap{display:flex;flex-wrap:wrap;gap:6px;padding:10px 13px;}
.badge-chip{display:flex;align-items:center;gap:4px;background:var(--bg);border-radius:9px;padding:4px 9px;border:2px solid rgba(255,200,0,.15);}
.badge-chip.locked{opacity:.3;}
.hist-item{display:flex;align-items:center;gap:8px;padding:8px 13px;border-bottom:1px solid rgba(0,0,0,.04);cursor:pointer;}
.hist-item:last-child{border:none;}
.hist-thumb{width:30px;height:38px;border-radius:6px;overflow:hidden;background:#FFB300;flex-shrink:0;}
.hist-thumb img{width:100%;height:100%;object-fit:cover;}

/* FEEDBACK */
#pgFeedback{background:var(--bg);}
.fb-scr{flex:1;overflow-y:auto;padding:13px 13px 16px;}
.fb-scr::-webkit-scrollbar{width:0;}
.fb-form{background:var(--card);border-radius:17px;padding:14px;box-shadow:0 4px 12px rgba(0,0,0,.08);}
.fb-type-grid{display:grid;grid-template-columns:1fr 1fr;gap:6px;margin-bottom:12px;}
.fb-type-btn{padding:9px 5px;border-radius:10px;border:2px solid rgba(255,200,0,.2);background:var(--bg);font-family:'Baloo 2',cursive;font-size:11px;font-weight:700;color:var(--text);cursor:pointer;text-align:center;}
.fb-type-btn.sel{background:linear-gradient(135deg,var(--a),var(--a2));color:#fff;border-color:var(--a);box-shadow:0 3px 0 var(--s);}
.fb-lbl{font-size:11px;font-weight:800;color:var(--sub);margin-bottom:5px;}
.fb-input,.fb-textarea{width:100%;padding:9px 12px;border-radius:10px;border:2px solid rgba(255,200,0,.28);font-family:'Baloo 2',cursive;font-size:13px;font-weight:600;color:var(--text);background:var(--bg);outline:none;margin-bottom:10px;}
.fb-textarea{height:88px;resize:none;}
.fb-submit{width:100%;padding:12px;background:linear-gradient(135deg,var(--a),var(--a2));color:#fff;border:none;border-radius:12px;font-family:'Lilita One',cursive;font-size:16px;box-shadow:0 5px 0 var(--s);cursor:pointer;}
.fb-submit:active{transform:translateY(3px);}

/* INBOX PAGE */
#pgInbox{background:var(--bg);}
.inbox-scr{flex:1;overflow-y:auto;padding:13px;}
.inbox-scr::-webkit-scrollbar{width:0;}

/* DEV PANEL */
#pgDev{background:#12121e;}
.dev-hdr{background:linear-gradient(135deg,#1e1e30,#12121e);padding:10px 13px;display:flex;align-items:center;gap:9px;border-bottom:2px solid #333358;flex-shrink:0;}
.dev-hdr-t{font-family:'Lilita One',cursive;font-size:16px;color:#FFD700;flex:1;}
.dev-scr{flex:1;overflow-y:auto;padding:11px;}
.dev-scr::-webkit-scrollbar{width:0;}
.dev-sec{background:#1e1e30;border-radius:12px;border:1px solid #333358;margin-bottom:13px;overflow:hidden;}
.dev-sec-h{background:linear-gradient(135deg,var(--a),var(--a2));padding:8px 12px;font-family:'Lilita One',cursive;font-size:12px;color:#fff;display:flex;align-items:center;justify-content:space-between;}
.dev-sec-b{padding:10px;}
.dev-stat-g{display:grid;grid-template-columns:1fr 1fr 1fr;gap:6px;}
.dev-stat{background:#12121e;border-radius:8px;padding:8px;text-align:center;}
.dev-stat-n{font-family:'Lilita One',cursive;font-size:20px;color:var(--a);}
.dev-stat-l{font-size:9px;color:#888;font-weight:700;}
.dev-cr{background:#12121e;border-radius:8px;padding:8px 10px;margin-bottom:6px;border:1px solid #333358;}
.dev-cn{font-size:11px;font-weight:800;color:#e8e0ff;margin-bottom:4px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}
.dev-cm{font-size:9px;color:#888;margin-bottom:6px;}
.dev-btns{display:flex;flex-wrap:wrap;gap:3px;}
.dev-btn{padding:3px 8px;border-radius:6px;border:none;font-family:'Baloo 2',cursive;font-size:9px;font-weight:700;cursor:pointer;}
.dbe{background:#2d5a8e;color:#fff;}.dbh{background:#5a3a6e;color:#fff;}.dbp{background:#8e6a00;color:#fff;}
.dbn{background:#8e2a00;color:#fff;}.dbu{background:#1e3a1e;color:#adf;}.dbd{background:#8e1a1a;color:#fff;}
.dbr{background:#2d7a3a;color:#fff;}
.dev-in{width:100%;padding:7px 10px;background:#12121e;color:#e8e0ff;border:1px solid #333358;border-radius:7px;font-family:'Baloo 2',cursive;font-size:12px;outline:none;margin-bottom:6px;}
.dev-sel{width:100%;padding:7px 10px;background:#12121e;color:#e8e0ff;border:1px solid #333358;border-radius:7px;font-family:'Baloo 2',cursive;font-size:12px;outline:none;margin-bottom:6px;}
.dev-add{width:100%;padding:9px;background:linear-gradient(135deg,var(--a),var(--a2));color:#fff;border:none;border-radius:8px;font-family:'Lilita One',cursive;font-size:13px;cursor:pointer;box-shadow:0 3px 0 var(--s);}
.dev-add:active{transform:translateY(2px);}
.fb-mi{background:#12121e;border-radius:8px;padding:8px 10px;margin-bottom:7px;border:1px solid #333358;}
.fb-mt{font-size:9px;font-weight:800;color:var(--a);margin-bottom:2px;}
.fb-mn{font-size:9px;font-weight:700;color:#aaa;}
.fb-mm{font-size:11px;color:#e8e0ff;margin-top:3px;line-height:1.5;}
.fb-mtime{font-size:9px;color:#666;margin-top:3px;}
.dev-reply-wrap{margin-top:7px;display:flex;gap:5px;}
.dev-reply-in{flex:1;padding:5px 8px;background:#1e1e30;color:#e8e0ff;border:1px solid #444;border-radius:7px;font-family:'Baloo 2',cursive;font-size:11px;outline:none;}
.dev-reply-btn{padding:5px 10px;background:linear-gradient(135deg,#44BB44,#2E7D32);color:#fff;border:none;border-radius:7px;font-family:'Lilita One',cursive;font-size:11px;cursor:pointer;}
.dev-bk{width:100%;padding:9px;border:none;border-radius:8px;font-family:'Lilita One',cursive;font-size:12px;cursor:pointer;margin-bottom:6px;}

/* OVERLAYS */
#ovOpen{display:none;position:fixed;inset:0;z-index:9999;background:linear-gradient(135deg,#FFD700,#FF8C00);flex-direction:column;align-items:center;justify-content:center;}
#ovOpen.show{display:flex;animation:fadeIn .25s ease;}
#cfLayer{position:fixed;inset:0;pointer-events:none;z-index:9990;overflow:hidden;}
.cf{position:absolute;border-radius:2px;animation:confettiFall linear forwards;}
#badgeToast{position:fixed;bottom:74px;left:50%;transform:translateX(-50%);background:linear-gradient(135deg,#FFD700,#FF8C00);border-radius:13px;padding:10px 15px;display:none;align-items:center;gap:8px;box-shadow:0 5px 14px rgba(0,0,0,.22);z-index:9995;white-space:nowrap;}
#xpToast{position:fixed;top:72px;right:13px;background:#FFD700;border-radius:10px;padding:6px 11px;display:none;font-family:'Lilita One',cursive;font-size:14px;color:#CC2200;box-shadow:0 4px 9px rgba(0,0,0,.18);z-index:9995;animation:pop .4s ease;}
#lvlToast{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:linear-gradient(135deg,#FFD700,#FF4400);border-radius:20px;padding:18px 24px;display:none;flex-direction:column;align-items:center;gap:7px;box-shadow:0 8px 24px rgba(0,0,0,.3);z-index:9996;text-align:center;}
#lvlToast.show{display:flex;animation:pop .5s ease;}
#maintScreen{display:none;position:fixed;inset:0;z-index:9997;background:linear-gradient(160deg,#FFD700,#FF6B00);flex-direction:column;align-items:center;justify-content:center;gap:13px;padding:28px;text-align:center;}
#maintScreen.show{display:flex;}
#pwModal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.75);z-index:9998;align-items:center;justify-content:center;}
#pwModal.show{display:flex;}
.pw-box{background:#1e1e30;border-radius:17px;padding:24px;width:260px;text-align:center;border:2px solid #FFD700;animation:pop .3s ease;}
.pw-input{width:100%;padding:10px;background:#12121e;color:#e8e0ff;border:2px solid #FFD700;border-radius:10px;font-family:'Baloo 2',cursive;font-size:16px;text-align:center;letter-spacing:4px;outline:none;margin-bottom:11px;}
.pw-btns{display:flex;gap:7px;}
.pw-ok{flex:1;padding:9px;background:linear-gradient(135deg,#FF7700,#FF4400);color:#fff;border:none;border-radius:9px;font-family:'Lilita One',cursive;font-size:14px;cursor:pointer;}
.pw-cancel{padding:9px 13px;background:#333;color:#aaa;border:none;border-radius:9px;font-family:'Baloo 2',cursive;font-size:12px;cursor:pointer;}
</style>
</head>
<body>
<!-- FIXED OVERLAYS -->
<div id="maintScreen"><div style="font-size:76px;animation:bounce 2s ease-in-out infinite">üîß</div><div style="font-family:'Lilita One',cursive;font-size:24px;color:#CC2200;">Jald Aayenge!</div><div style="font-size:13px;color:#884400;font-weight:700;line-height:1.6;">Update ho rahi hai...<br>Thoda wait karo üòä</div></div>
<div id="cfLayer"></div>
<div id="badgeToast" style="display:none;"><span id="btIco" style="font-size:24px">üèÜ</span><div style="font-size:11px;font-weight:800;color:#CC2200" id="btTxt">New Badge!</div></div>
<div id="xpToast">+10 XP ‚≠ê</div>
<div id="lvlToast"><div style="font-size:48px">üÜô</div><div style="font-family:'Lilita One',cursive;font-size:22px;color:#fff;" id="lvlTitle">Level Up!</div><div style="font-size:14px;color:rgba(255,255,255,.9);" id="lvlSub">New Rank!</div></div>
<div class="notif-ov" id="notifOv" onclick="closeNotif()"></div>
<div class="notif-panel" id="notifPanel">
  <div class="notif-hdr"><div style="font-family:'Lilita One',cursive;font-size:17px;color:#fff;">üîî Notifications</div><button class="notif-close" onclick="closeNotif()">‚úï</button></div>
  <div class="notif-list" id="notifList"></div>
</div>
<div id="favsOv" onclick="closeFavsOv(event)">
  <div class="favs-panel">
    <div class="favs-phdr"><div style="font-family:'Lilita One',cursive;font-size:19px;color:#fff;">‚ù§Ô∏è Favourites</div><button class="favs-px" onclick="closeFavsOv()">‚úï</button></div>
    <div class="favs-grid" id="favsGrid"></div>
  </div>
</div>
<div id="pwModal"><div class="pw-box"><div style="font-family:'Lilita One',cursive;font-size:18px;color:#FFD700;margin-bottom:5px;">üîê Dev Panel</div><div style="font-size:11px;color:#FF4444;min-height:15px;margin-bottom:5px;" id="pwErr"></div><input class="pw-input" type="password" id="pwIn" maxlength="20" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢" onkeydown="if(event.key==='Enter')checkPw()"><div class="pw-btns"><button class="pw-cancel" onclick="closePwModal()">Cancel</button><button class="pw-ok" onclick="checkPw()">Enter</button></div></div></div>

<!-- SPLASH -->
<div id="pgSplash" class="page active"><img class="sp-img" src="./champak_splash.png" alt=""><div class="sp-btn-wrap"><button class="sp-btn ripple-wrap" onclick="addRipple(event,this);startApp()"><span style="font-size:22px">‚≠ê</span> ‡§∂‡•Å‡§∞‡•Å ‡§ï‡§∞‡•á‡§Ç</button></div></div>

<!-- ONBOARD -->
<div id="pgOnboard" class="page">
  <div class="ob-inner" style="padding-top:28px;">
    <div style="font-size:66px;animation:bounce 2s ease-in-out infinite;">üìö</div>
    <div class="ob-title">Champak mein Swagat! üéâ</div>
    <div class="ob-sub">Apna naam likho aur character chuno!</div>
    <input class="ob-input" type="text" id="nameIn" placeholder="Tumhara naam..." maxlength="22">
    <div class="char-lbl">üé≠ Apna Character Chuno:</div>
    <div class="char-grid" id="charGrid"></div>
    <button class="ob-btn ripple-wrap" onclick="addRipple(event,this);saveNameAndStart()">Chalte Hain! üöÄ</button>
  </div>
</div>

<!-- HOME -->
<div id="pgHome" class="page">
  <div class="home-hdr">
    <div class="hdr-avatar ripple-wrap" id="logoTap" onclick="addRipple(event,this);tapLogo()"><span id="hdrChar">ü¶ä</span></div>
    <div style="flex:1;">
      <div class="hdr-uname" id="hdrName">Cheeku</div>
      <div class="hdr-rank" id="hdrRank">üìñ Beginner</div>
    </div>
    <button class="hdr-btn ripple-wrap" onclick="addRipple(event,this);openFavsOv()" title="Favourites">‚ù§Ô∏è</button>
    <button class="hdr-btn" id="notifBtn" onclick="openNotif()">üîî<div class="notif-dot" id="notifDot" style="display:none;"></div></button>
    <button class="hdr-btn" id="refreshBtn" onclick="refreshPage()">üîÑ</button>
  </div>
  <div class="ann-bar" id="annBar" style="display:none;"><span>üì¢</span><span style="font-size:12px;font-weight:800;color:#fff;flex:1;" id="annTxt"></span><button class="ann-x" onclick="closeAnn()">‚úï</button></div>
  <div id="homeScroll">
    <div class="streak-bar"><div style="font-size:20px;" id="strkFire">üî•</div><div style="flex:1;"><div style="font-size:12px;font-weight:800;color:var(--text);" id="strkTitle">Reading Streak</div><div style="font-size:10px;color:var(--sub);font-weight:600;" id="strkSub">Read today!</div></div><div><div style="font-size:10px;font-weight:800;color:var(--a);" id="xpLbl">0 XP</div><div class="xp-bar-bg"><div class="xp-bar-fill" id="xpFill" style="width:0%"></div></div></div></div>
    <div class="hero-banner" onclick="goComics('all')"><div class="hero-img"><img src="./champak_banner.png" alt="Champak"></div><div class="hero-foot"><div style="font-size:12px;font-weight:800;color:#fff;">üåü Champak ki Duniya!</div><button style="background:#FFE100;color:#6B3A00;font-family:'Lilita One',cursive;font-size:11px;padding:5px 12px;border:none;border-radius:9px;box-shadow:0 3px 0 #C8A800;cursor:pointer;" onclick="event.stopPropagation();goComics('all')">Read ‚Üí</button></div></div>
    <div class="cotd-wrap" id="cotdWrap"><div class="cotd-lbl">üéÅ Comic of the Day</div><div class="cotd-card" id="cotdCard"><div class="cotd-thumb"><img id="cotdImg" src="" alt="" onerror="this.style.display='none'"></div><div style="flex:1;"><div style="font-size:13px;font-weight:800;color:#fff;line-height:1.3;margin-bottom:3px;" id="cotdTitle">Loading...</div><div style="font-size:10px;color:rgba(255,255,255,.8);font-weight:700;" id="cotdSub"></div></div><button class="cotd-btn" id="cotdBtn">Read ‚Üí</button></div></div>
    <div class="search-wrap"><div class="search-bar"><span>üîç</span><input type="text" id="homeSearch" placeholder="Comic dhundho..." oninput="doSearch(this.value)"></div></div>
    <div class="sec-hdr"><div class="sec-title">üáÆüá≥ Hindi Comics</div><button class="see-all" onclick="goComics('hi')">See All ‚Üí</button></div>
    <div class="lib-grid" id="libHi"></div>
    <div style="height:10px;"></div>
    <div class="sec-hdr"><div class="sec-title">üá¨üáß English Comics</div><button class="see-all" onclick="goComics('en')">See All ‚Üí</button></div>
    <div class="lib-grid" id="libEn"></div>
    <div style="height:8px;"></div>
  </div>
  <div id="bNav">
    <div class="nav-item" id="nav-home" data-active onclick="setNav('home');showPage('pgHome')"><div class="nav-ico act-ico">üè†</div><div class="nav-label">Home</div></div>
    <div class="nav-item" id="nav-comics" onclick="setNav('comics');goComics('all')"><div class="nav-ico">üìö</div><div class="nav-label">Comics</div><div class="nav-badge" id="newBadge" style="display:none">0</div></div>
    <div class="nav-item" id="nav-games" onclick="setNav('games');showPage('pgGames')"><div class="nav-ico">üéÆ</div><div class="nav-label">Games</div></div>
    <div class="nav-item" id="nav-learn" onclick="setNav('learn');showPage('pgLearn')"><div class="nav-ico">üéì</div><div class="nav-label">Learn</div></div>
    <div class="nav-item" id="nav-settings" onclick="setNav('settings');showPage('pgSettings');renderSettings()"><div class="nav-ico">‚öôÔ∏è</div><div class="nav-label">Settings</div></div>
  </div>
</div>

<!-- COMICS -->
<div id="pgSeeAll" class="page"><div class="app-hdr"><button class="hdr-back" onclick="showPage('pgHome');setNav('home')">‚Üê</button><div style="flex:1"><div style="font-family:'Lilita One',cursive;font-size:18px;color:var(--h2);">‡§ö‡§Ç‡§™‡§ï Comics</div><div style="font-size:9px;font-weight:700;color:var(--h3);" id="allCount"></div></div></div><div class="cat-tabs"><button class="cat-tab on" id="tab-all" onclick="switchTab('all')">üìñ All</button><button class="cat-tab" id="tab-hi" onclick="switchTab('hi')">üáÆüá≥ Hindi</button><button class="cat-tab" id="tab-en" onclick="switchTab('en')">üá¨üáß English</button></div><div class="scr"><div class="all-grid" id="allGrid"></div></div></div>

<!-- GAMES HUB -->
<div id="pgGames" class="page"><div class="app-hdr"><button class="hdr-back" onclick="showPage('pgHome');setNav('home')">‚Üê</button><div style="flex:1"><div style="font-family:'Lilita One',cursive;font-size:19px;color:var(--h2);">üéÆ Games</div><div style="font-size:9px;font-weight:700;color:var(--h3);">Fun khelo, XP jeeto!</div></div></div><div class="scr" style="padding:13px;"><div class="games-grid"><div class="game-card" style="animation-delay:.0s"><div class="game-ico">‚ùå‚≠ï</div><div class="game-title">Tic Tac Toe</div><div class="game-sub">vs AI ya 2 Player</div><button class="game-btn ripple-wrap" onclick="addRipple(event,this);initTTT()">‚ñ∂ Play</button></div><div class="game-card" style="animation-delay:.08s"><div class="game-ico">üêçü™ú</div><div class="game-title">Snake & Ladder</div><div class="game-sub">Dice phenko!</div><button class="game-btn ripple-wrap" onclick="addRipple(event,this);initSL()">‚ñ∂ Play</button></div><div class="game-card" style="animation-delay:.16s"><div class="game-ico">üß©</div><div class="game-title">Memory Match</div><div class="game-sub">Cards flip karo!</div><button class="game-btn ripple-wrap" onclick="addRipple(event,this);initMem()">‚ñ∂ Play</button></div><div class="game-card" style="animation-delay:.24s"><div class="game-ico">üéØ</div><div class="game-title">Ludo</div><div class="game-sub">2 player classic</div><button class="game-btn ripple-wrap" onclick="addRipple(event,this);initLudo()">‚ñ∂ Play</button></div></div></div></div>

<!-- TTT -->
<div id="pgTTT" class="page"><div class="app-hdr"><button class="hdr-back" onclick="showPage('pgGames')">‚Üê</button><div style="flex:1"><div style="font-family:'Lilita One',cursive;font-size:17px;color:var(--h2);">‚ùå‚≠ï Tic Tac Toe</div></div><button class="hdr-btn" onclick="initTTT()">üîÑ</button></div><div class="ttt-wrap"><div class="ttt-mode-wrap"><button class="ttt-mode-btn on" id="tttM1" onclick="setTTTMode('ai',this)">ü§ñ vs AI</button><button class="ttt-mode-btn" id="tttM2" onclick="setTTTMode('2p',this)">üë• 2P</button></div><div class="ttt-status" id="tttSt">‚ùå ka turn</div><div class="ttt-board" id="tttBoard"></div><button class="g-btn ripple-wrap" onclick="addRipple(event,this);initTTT()">üîÑ New Game</button><div style="text-align:center;font-family:'Lilita One',cursive;font-size:13px;color:var(--sub);" id="tttSc"></div></div></div>

<!-- SNAKE LADDER -->
<div id="pgSnake" class="page"><div class="app-hdr"><button class="hdr-back" onclick="showPage('pgGames')">‚Üê</button><div style="flex:1"><div style="font-family:'Lilita One',cursive;font-size:17px;color:var(--h2);">üêçü™ú Snake & Ladder</div></div><button class="hdr-btn" onclick="initSL()">üîÑ</button></div><div class="sl-wrap"><div class="sl-board" id="slBoard"></div><div class="sl-info"><div class="sl-players" id="slPlayers"></div><button class="dice-btn ripple-wrap" id="slDice" onclick="addRipple(event,this);slRoll()">üé≤ Dice Phenko!</button><div class="sl-log" id="slLog"></div></div></div></div>

<!-- MEMORY -->
<div id="pgMemory" class="page"><div class="app-hdr"><button class="hdr-back" onclick="showPage('pgGames')">‚Üê</button><div style="flex:1"><div style="font-family:'Lilita One',cursive;font-size:17px;color:var(--h2);">üß© Memory Match</div></div><button class="hdr-btn" onclick="initMem()">üîÑ</button></div><div class="mem-wrap"><div class="mem-stats"><div class="mem-stat"><div class="mem-stat-num" id="memM">0</div><div class="mem-stat-lbl">Moves</div></div><div class="mem-stat"><div class="mem-stat-num" id="memP">0</div><div class="mem-stat-lbl">Pairs</div></div><div class="mem-stat"><div class="mem-stat-num" id="memT">0s</div><div class="mem-stat-lbl">Time</div></div></div><div class="mem-board" id="memBoard"></div></div></div>

<!-- LUDO -->
<div id="pgLudo" class="page"><div class="app-hdr"><button class="hdr-back" onclick="showPage('pgGames')">‚Üê</button><div style="flex:1"><div style="font-family:'Lilita One',cursive;font-size:17px;color:var(--h2);">üéØ Ludo</div></div><button class="hdr-btn" onclick="initLudo()">üîÑ</button></div><div class="ludo-wrap"><div class="ludo-board"><div class="ludo-ph"></div><div class="ludo-pv"></div><div class="ludo-zone lzone-tl" id="lzTL"></div><div class="ludo-zone lzone-tr" id="lzTR"></div><div class="ludo-zone lzone-bl" id="lzBL"></div><div class="ludo-zone lzone-br" id="lzBR"></div><div class="ludo-ctr">üèÜ</div></div><div class="ludo-info"><div class="ludo-players" id="luPlayers"></div><button class="dice-btn ripple-wrap" id="luDice" onclick="addRipple(event,this);luRoll()">üé≤ Dice Phenko!</button><div class="sl-log" id="luLog"></div></div></div></div>

<!-- LEARN HUB -->
<div id="pgLearn" class="page"><div class="app-hdr"><button class="hdr-back" onclick="showPage('pgHome');setNav('home')">‚Üê</button><div style="flex:1"><div style="font-family:'Lilita One',cursive;font-size:19px;color:var(--h2);">üéì Learn Zone</div><div style="font-size:9px;font-weight:700;color:var(--h3);">Seekho, khelo, jeeto!</div></div></div><div class="learn-scr"><div class="age-title">üåü Little Learners (4‚Äì7 years)</div><div class="learn-grid" id="lg1"></div><div class="age-title">üß† Smart Kids (6‚Äì10 years)</div><div class="learn-grid" id="lg2"></div></div></div>

<!-- TOPIC PAGE -->
<div id="pgTopic" class="page"><div class="app-hdr"><button class="hdr-back" onclick="showPage('pgLearn')">‚Üê</button><div style="flex:1"><div style="font-family:'Lilita One',cursive;font-size:17px;color:var(--h2);" id="topicTitle">Learn</div></div></div><div class="topic-scr"><div class="lrn-grid" id="topicGrid"></div><button class="quiz-start ripple-wrap" onclick="addRipple(event,this);startQuiz()">üß† Start Quiz!</button></div></div>

<!-- QUIZ -->
<div id="pgQuiz" class="page"><div class="app-hdr"><button class="hdr-back" onclick="showPage('pgTopic')">‚Üê</button><div style="flex:1"><div style="font-family:'Lilita One',cursive;font-size:17px;color:var(--h2);">üß† Quiz Time!</div></div></div><div class="quiz-wrap" id="quizWrap"></div></div>

<!-- SETTINGS -->
<div id="pgSettings" class="page">
  <div class="app-hdr"><button class="hdr-back" onclick="showPage('pgHome');setNav('home')">‚Üê</button><div style="flex:1"><div style="font-family:'Lilita One',cursive;font-size:18px;color:var(--h2);">‚öôÔ∏è Settings</div></div></div>
  <div class="sett-scr">
    <div class="user-profile-card">
      <div class="user-pc-top">
        <div class="user-pc-av" id="settAv">ü¶ä</div>
        <div><div class="user-pc-name" id="settName">Player</div><div class="user-pc-rank" id="settRank">üìñ Beginner</div></div>
      </div>
      <div class="user-pc-stats">
        <div class="user-pc-stat"><div class="user-pc-stat-n" id="settXP">0</div><div class="user-pc-stat-l">XP</div></div>
        <div class="user-pc-stat"><div class="user-pc-stat-n" id="settStreak">0</div><div class="user-pc-stat-l">Day Streak</div></div>
        <div class="user-pc-stat"><div class="user-pc-stat-n" id="settReads">0</div><div class="user-pc-stat-l">Comics Read</div></div>
      </div>
    </div>
    <div class="sett-sec">üé® Appearance</div>
    <div class="sett-group">
      <div class="sett-row" onclick="toggleDark()"><div class="sett-ico" style="background:#1a1a2e">üåô</div><div style="flex:1"><div class="sett-label">Dark Mode</div></div><div class="toggle" id="darkToggle"></div></div>
      <div class="sett-row" onclick="toggleSound()"><div class="sett-ico" style="background:#FFF0E0">üîä</div><div style="flex:1"><div class="sett-label">Sound Effects</div></div><div class="toggle on" id="soundToggle"></div></div>
      <div class="theme-row"><div style="font-size:12px;font-weight:700;color:var(--text);margin-bottom:7px;">üé® Colour Theme</div><div><span class="tdot on" id="td-orange" style="background:linear-gradient(135deg,#FFD700,#FF6B00)" onclick="setTheme('orange')"></span><span class="tdot" id="td-blue" style="background:linear-gradient(135deg,#4FC3F7,#1565C0)" onclick="setTheme('blue')"></span><span class="tdot" id="td-green" style="background:linear-gradient(135deg,#A5D6A7,#2E7D32)" onclick="setTheme('green')"></span><span class="tdot" id="td-purple" style="background:linear-gradient(135deg,#CE93D8,#6A1B9A)" onclick="setTheme('purple')"></span><span class="tdot" id="td-pink" style="background:linear-gradient(135deg,#F48FB1,#C2185B)" onclick="setTheme('pink')"></span></div></div>
    </div>
    <div class="sett-sec">üèÖ Rank Progress</div>
    <div class="sett-group"><div id="rankProgressWrap" style="padding:13px;"></div></div>
    <div class="sett-sec">üèÜ Badges</div><div class="sett-group"><div class="badges-wrap" id="badgesWrap"></div></div>
    <div class="sett-sec">üìñ Reading History</div><div class="sett-group" id="histList"></div>
    <div class="sett-sec">‚ÑπÔ∏è Info</div>
    <div class="sett-group">
      <div class="sett-row"><div class="sett-ico" style="background:#FFF3CD">üì±</div><div style="flex:1"><div class="sett-label">Version</div><div class="sett-val">v4.0 ‚Äî Latest ‚úì</div></div></div>
      <div class="sett-row"><div class="sett-ico" style="background:#FFE0E0">üìö</div><div style="flex:1"><div class="sett-label">Total Comics</div><div class="sett-val" id="settTotal"></div></div></div>
      <div class="sett-row"><div class="sett-ico" style="background:#E0FFE8">üõ°Ô∏è</div><div style="flex:1"><div class="sett-label">Kid Safe</div><div class="sett-val">100% Ad-free</div></div><div class="sett-arr" style="color:#22aa44">‚úì</div></div>
    </div>
    <div class="sett-sec">üì¨ Feedback & Messages</div>
    <div class="sett-group">
      <div class="sett-row" onclick="showPage('pgFeedback')"><div class="sett-ico" style="background:#FFF0E0">üíå</div><div style="flex:1"><div class="sett-label">Send Feedback</div><div class="sett-val">Ideas, bugs, comic requests</div></div><div class="sett-arr">‚Ä∫</div></div>
      <div class="sett-row" onclick="showPage('pgInbox');renderInbox()"><div class="sett-ico" style="background:#E8F5E9">üì•</div><div style="flex:1"><div class="sett-label">My Inbox</div><div class="sett-val" id="inboxCount">Dev replies aayenge yahan</div></div><div class="sett-arr">‚Ä∫</div></div>
    </div>
    <div class="sett-sec">üë®‚Äçüíª About</div>
    <div class="sett-group">
      <div class="sett-row"><div class="sett-ico" style="background:#FFF0E0">üßë‚Äçüé®</div><div style="flex:1"><div class="sett-label">Developed by</div><div class="sett-val">Baadal ‚Äî Made with ‚ù§Ô∏è</div></div></div>
      <div class="sett-row" onclick="openLink('https://github.com/coder0864-cell')"><div class="sett-ico" style="background:#f0f0f0">üêô</div><div style="flex:1"><div class="sett-label">GitHub</div><div class="sett-val">coder0864-cell</div></div><div class="sett-arr">‚Ä∫</div></div>
    </div>
    <div style="text-align:center;padding:9px 0 4px;color:#bbb;font-size:10px;font-weight:700;">Made with ‚ù§Ô∏è by Baadal ‚Ä¢ v4.0</div>
  </div>
</div>

<!-- INBOX PAGE -->
<div id="pgInbox" class="page">
  <div class="app-hdr"><button class="hdr-back" onclick="showPage('pgSettings')">‚Üê</button><div style="flex:1"><div style="font-family:'Lilita One',cursive;font-size:18px;color:var(--h2);">üì• My Inbox</div><div style="font-size:9px;font-weight:700;color:var(--h3);">Developer ke replies</div></div></div>
  <div class="inbox-scr" id="inboxScr"></div>
</div>

<!-- FEEDBACK -->
<div id="pgFeedback" class="page"><div class="app-hdr"><button class="hdr-back" onclick="showPage('pgSettings')">‚Üê</button><div style="flex:1"><div style="font-family:'Lilita One',cursive;font-size:17px;color:var(--h2);">üíå Feedback</div><div style="font-size:9px;font-weight:700;color:var(--h3);">Developer ko seedha message</div></div></div>
<div class="fb-scr">
  <div style="background:linear-gradient(135deg,#E8F5E9,#C8E6C9);border-radius:12px;padding:10px 12px;margin-bottom:11px;display:flex;align-items:center;gap:8px;border:2px solid #81C784;"><div style="font-size:22px">‚úÖ</div><div><div style="font-size:11px;font-weight:800;color:#1B5E20;">100% In-App ‚Äî Koi Link Nahi!</div><div style="font-size:10px;color:#388E3C;font-weight:600;margin-top:1px;">Message developer ke panel mein jaata hai üîí Reply tumhara inbox mein aayega!</div></div></div>
  <div class="fb-form">
    <div class="fb-lbl">üìã Type:</div>
    <div class="fb-type-grid" id="fbTypeGrid"><button class="fb-type-btn sel" onclick="selectFbType(this,'idea')">üí° Feature Idea</button><button class="fb-type-btn" onclick="selectFbType(this,'bug')">üêõ Report Bug</button><button class="fb-type-btn" onclick="selectFbType(this,'msg')">üí¨ General Msg</button><button class="fb-type-btn" onclick="selectFbType(this,'request')">üìñ Comic Request</button></div>
    <div class="fb-lbl">üë§ Tumhara Naam</div>
    <input class="fb-input" type="text" id="fbName" placeholder="Apna naam...">
    <div class="fb-lbl">‚úèÔ∏è Message</div>
    <textarea class="fb-textarea" id="fbMsg" placeholder="Yahan likho..."></textarea>
    <button class="fb-submit ripple-wrap" onclick="addRipple(event,this);submitFeedback()">üöÄ Bhejo!</button>
    <div style="text-align:center;margin-top:8px;font-size:10px;color:#aaa;font-weight:600;">üìµ No email ‚Ä¢ üîí App ke andar hi ‚Ä¢ üì• Reply inbox mein</div>
  </div>
</div></div>

<!-- DEV PANEL -->
<div id="pgDev" class="page"><div class="dev-hdr"><button style="background:rgba(255,255,255,.1);border:1px solid #555;color:#aaa;width:30px;height:30px;border-radius:7px;font-size:14px;cursor:pointer;display:flex;align-items:center;justify-content:center;" onclick="showPage('pgHome');setNav('home')">‚Üê</button><div class="dev-hdr-t">üõ†Ô∏è Dev Panel</div><button style="background:rgba(255,100,0,.2);border:1px solid #FF6B00;color:#FF6B00;padding:3px 8px;border-radius:6px;font-size:10px;font-weight:700;cursor:pointer;" onclick="devLock()">üîí Lock</button></div>
<div class="dev-scr">
  <div class="dev-sec"><div class="dev-sec-h">üìä Stats</div><div class="dev-sec-b"><div class="dev-stat-g" id="devStats"></div><div id="devTop3" style="margin-top:9px;"></div></div></div>
  <div class="dev-sec"><div class="dev-sec-h">‚ûï Add Comic</div><div class="dev-sec-b"><input class="dev-in" id="daN" placeholder="Comic name..."><input class="dev-in" id="daU" placeholder="FlipHTML5 URL..."><select class="dev-sel" id="daL"><option value="hi">üáÆüá≥ Hindi</option><option value="en">üá¨üáß English</option></select><input class="dev-in" id="daD" placeholder="Date (Jan 2024)"><input class="dev-in" id="daP" placeholder="Pages" type="number"><button class="dev-add" onclick="devAdd()">‚ûï Add Comic</button></div></div>
  <div class="dev-sec"><div class="dev-sec-h">üìö Manage Comics <span id="devCC" style="font-size:10px;opacity:.8;"></span></div><div class="dev-sec-b" id="devComics"></div></div>
  <div class="dev-sec"><div class="dev-sec-h">üì¢ Announcement</div><div class="dev-sec-b"><textarea class="dev-in" id="devAnnTxt" style="height:60px;resize:none;" placeholder="Announcement..."></textarea><div style="display:flex;gap:6px;"><button class="dev-add" style="flex:1;" onclick="devSaveAnn()">üíæ Save</button><button class="dev-add" style="flex:1;background:#8e1a1a;" onclick="devHideAnn()">üö´ Hide</button></div></div></div>
  <div class="dev-sec"><div class="dev-sec-h">üîß Maintenance</div><div class="dev-sec-b"><div style="display:flex;align-items:center;justify-content:space-between;"><div><div style="font-size:12px;font-weight:700;color:#e8e0ff;">Maintenance Mode</div><div style="font-size:10px;color:#888;">Users see Coming Soon</div></div><div class="toggle" id="devMaintT" onclick="devToggleMaint()"></div></div></div></div>
  <div class="dev-sec"><div class="dev-sec-h">üíå Feedback & Reply <span id="devFbC" style="font-size:10px;opacity:.8;"></span><button style="background:rgba(255,255,255,.15);border:none;color:#fff;padding:2px 6px;border-radius:5px;font-size:9px;cursor:pointer;margin-left:4px;" onclick="devClearFb()">Clear</button></div><div class="dev-sec-b" id="devFbList"></div></div>
  <div class="dev-sec"><div class="dev-sec-h">üíæ Backup & Restore</div><div class="dev-sec-b"><button class="dev-bk" style="background:linear-gradient(135deg,#1565C0,#0D47A1);color:#fff;" onclick="devBackup()">üì§ Export JSON</button><textarea class="dev-in" id="devRI" style="height:65px;resize:none;" placeholder="Paste JSON to restore..."></textarea><button class="dev-bk" style="background:linear-gradient(135deg,#2E7D32,#1B5E20);color:#fff;" onclick="devRestore()">üì• Restore</button></div></div>
  <div class="dev-sec"><div class="dev-sec-h">üîë Change Password</div><div class="dev-sec-b"><input class="dev-in" type="password" id="devP1" placeholder="New password..."><input class="dev-in" type="password" id="devP2" placeholder="Confirm..."><button class="dev-add" onclick="devChangePass()">üîë Update</button></div></div>
</div></div>

<!-- OPEN COMIC OVERLAY -->
<div id="ovOpen"><div style="font-size:62px">üìñ</div><div style="font-family:'Baloo 2',cursive;font-size:21px;font-weight:800;color:#CC3300;margin-top:13px;">Comic khul rahi hai!</div><div style="font-size:12px;color:#884400;margin-top:4px;font-weight:700;">Ek second ruko...</div></div>
<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê DATA ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
var DC=[{id:1,name:"Champak Hindi - Sep 2019",lang:"hi",isNew:false,isPinned:false,isHidden:false,flipUrl:"https://online.fliphtml5.com/ufmtz/dtjr/",pages:50,date:"Sep 2019"}];
var COMICS=[],FB=[],STATS={},FAVS=[],HIST=[],NOTIFS=[],REPLIES=[];
var U={name:'',avatar:'cheeku',lang:'hi',theme:'orange',dark:false,sound:true};
var SK={last:'',count:0};
var XP=0,BADGES=[],ANN={active:false,text:''},MAINT=false;
var DEV_PW='1234',DEV_ON=false;
var LTAPS=0,LTIMER=null,CTAB='all',FBTYPE='idea';
var FIRST_TODAY=false;

var CHARS=[
  {id:'cheeku',name:'Cheeku',e:'ü¶ä'},{id:'meeku',name:'Meeku',e:'üê≠'},
  {id:'jumbo',name:'Jumbo',e:'üêò'},{id:'sheru',name:'Sheru',e:'ü¶Å'},
  {id:'bhalu',name:'Bhalu',e:'üêª'},{id:'titu',name:'Titu',e:'üê¶'},
  {id:'damru',name:'Damru',e:'üêí'},{id:'cheena',name:'Cheena',e:'üê±'}
];

var RANKS=[
  {min:0,title:'Beginner',ico:'üìñ',color:'#888888'},
  {min:100,title:'Reader',ico:'üìö',color:'#4CAF50'},
  {min:250,title:'Explorer',ico:'üîç',color:'#2196F3'},
  {min:500,title:'Champion',ico:'üèÜ',color:'#FF9800'},
  {min:1000,title:'Legend',ico:'‚ö°',color:'#9C27B0'},
  {min:2000,title:'Master',ico:'üëë',color:'#FFD700'}
];

var BDEFS=[
  {id:'first',ico:'üìñ',name:'First Read',opens:1},
  {id:'reader',ico:'üìö',name:'Book Worm',opens:5},
  {id:'super',ico:'ü¶∏',name:'Super Reader',opens:10},
  {id:'s3',ico:'üî•',name:'3-Day Streak',streak:3},
  {id:'s7',ico:'‚ö°',name:'Week Warrior',streak:7},
  {id:'xp100',ico:'‚≠ê',name:'XP Hunter',xp:100},
  {id:'xp500',ico:'üíé',name:'XP King',xp:500},
  {id:'explorer',ico:'üó∫Ô∏è',name:'Explorer',both:true},
  {id:'fav5',ico:'‚ù§Ô∏è',name:'Collector',fav:5}
];

var TOPICS=[
  {id:'abc',title:'ABC Alphabet',ico:'üî§',sub:'A to Z with pictures',age:1,col:'#FF6B00',
   items:[{e:'üçé',w:'A',n:'Apple'},{e:'üêù',w:'B',n:'Bee'},{e:'üê±',w:'C',n:'Cat'},{e:'üêï',w:'D',n:'Dog'},{e:'üêò',w:'E',n:'Elephant'},{e:'üê∏',w:'F',n:'Frog'},{e:'ü¶í',w:'G',n:'Giraffe'},{e:'üê¥',w:'H',n:'Horse'},{e:'üç¶',w:'I',n:'Ice Cream'},{e:'üÉè',w:'J',n:'Joker'},{e:'ü¶ò',w:'K',n:'Kangaroo'},{e:'ü¶Å',w:'L',n:'Lion'},{e:'üêí',w:'M',n:'Monkey'},{e:'üì∞',w:'N',n:'Newspaper'},{e:'ü¶â',w:'O',n:'Owl'},{e:'üêß',w:'P',n:'Penguin'},{e:'üëë',w:'Q',n:'Queen'},{e:'üê∞',w:'R',n:'Rabbit'},{e:'‚òÄÔ∏è',w:'S',n:'Sun'},{e:'üêØ',w:'T',n:'Tiger'},{e:'‚òÇÔ∏è',w:'U',n:'Umbrella'},{e:'üéª',w:'V',n:'Violin'},{e:'üê∫',w:'W',n:'Wolf'},{e:'üé∏',w:'X',n:'Xylophone'},{e:'üß∂',w:'Y',n:'Yarn'},{e:'ü¶ì',w:'Z',n:'Zebra'}]},
  {id:'hindi',title:'Hindi Varnamala',ico:'üî§',sub:'‡§Ö ‡§∏‡•á ‡§ú‡•ç‡§û ‡§§‡§ï',age:1,col:'#138808',
   items:[{e:'üçé',w:'‡§Ö',n:'‡§Ö‡§®‡§æ‡§∞'},{e:'ü•≠',w:'‡§Ü',n:'‡§Ü‡§Æ'},{e:'ü´ë',w:'‡§á',n:'‡§á‡§Æ‡§≤‡•Ä'},{e:'ü¶Ö',w:'‡§à',n:'‡§à‡§ó‡§≤'},{e:'üê™',w:'‡§â',n:'‡§ä‡§Å‡§ü'},{e:'üå≤',w:'‡§è',n:'‡§è‡§ï ‡§™‡•á‡§°‡§º'},{e:'üîß',w:'‡§î',n:'‡§î‡§ú‡§º‡§æ‡§∞'},{e:'üêú',w:'‡§ï',n:'‡§ï‡§Æ‡§≤'},{e:'üé®',w:'‡§ñ',n:'‡§ñ‡§∞‡§ó‡•ã‡§∂'},{e:'ü•õ',w:'‡§ó',n:'‡§ó‡§æ‡§Ø'},{e:'üè†',w:'‡§ò',n:'‡§ò‡§∞'},{e:'üîî',w:'‡§ö',n:'‡§ö‡§æ‡§Å‡§¶'},{e:'üåø',w:'‡§ú',n:'‡§ú‡§Ç‡§ó‡§≤'},{e:'üêç',w:'‡§®',n:'‡§®‡§æ‡§µ'},{e:'üë£',w:'‡§™',n:'‡§™‡§§‡§Ç‡§ó'},{e:'üçå',w:'‡§¨',n:'‡§¨‡§ï‡§∞‡•Ä'},{e:'üå∏',w:'‡§Æ',n:'‡§Æ‡§õ‡§≤‡•Ä'},{e:'ü¶ö',w:'‡§Ø',n:'‡§Ø‡§æ‡§§‡•ç‡§∞‡§æ'},{e:'üåπ',w:'‡§∞',n:'‡§∞‡§æ‡§ú‡§æ'},{e:'üåô',w:'‡§∂',n:'‡§∂‡•á‡§∞'},{e:'üê¢',w:'‡§∏',n:'‡§∏‡•Ç‡§∞‡§ú'},{e:'üéµ',w:'‡§π',n:'‡§π‡§æ‡§•‡•Ä'},{e:'üçã',w:'‡§°',n:'‡§°‡§Æ‡§∞‡•Ç'},{e:'üåä',w:'‡§¢',n:'‡§¢‡•ã‡§≤'},{e:'üéØ',w:'‡§ü',n:'‡§ü‡§Æ‡§æ‡§ü‡§∞'},{e:'ü•Å',w:'‡§†',n:'‡§†‡§Ç‡§°'}]},
  {id:'animals',title:'Animals',ico:'üêò',sub:'Animals and their names',age:1,col:'#4CAF50',
   items:[{e:'ü¶Å',w:'Lion',n:'Sher'},{e:'üêØ',w:'Tiger',n:'Bagh'},{e:'üêò',w:'Elephant',n:'Haathi'},{e:'ü¶í',w:'Giraffe',n:'Jiraf'},{e:'ü¶ì',w:'Zebra',n:'Zebra'},{e:'üêª',w:'Bear',n:'Bhalu'},{e:'ü¶ä',w:'Fox',n:'Lomdi'},{e:'üê∫',w:'Wolf',n:'Bhediya'},{e:'ü¶Ö',w:'Eagle',n:'Baaz'},{e:'üêß',w:'Penguin',n:'Penguin'},{e:'üê¨',w:'Dolphin',n:'Dolphin'},{e:'üê¢',w:'Turtle',n:'Kachhua'},{e:'ü¶ã',w:'Butterfly',n:'Titli'},{e:'üêù',w:'Bee',n:'Madhumakkhi'},{e:'üê∏',w:'Frog',n:'Mendhak'},{e:'üêí',w:'Monkey',n:'Bandar'}]},
  {id:'flowers',title:'Flowers & Plants',ico:'üå∏',sub:'Nature ki khubsurti',age:1,col:'#E91E63',
   items:[{e:'üåπ',w:'Rose',n:'Gulab'},{e:'üåª',w:'Sunflower',n:'Surajmukhi'},{e:'üå∏',w:'Blossom',n:'Phool'},{e:'üå∫',w:'Hibiscus',n:'Gudhal'},{e:'üåº',w:'Daisy',n:'Daisi'},{e:'üíê',w:'Bouquet',n:'Guldasta'},{e:'üåø',w:'Herb',n:'Jadi-buti'},{e:'üçÄ',w:'Clover',n:'Teen Patti'},{e:'üåµ',w:'Cactus',n:'Cactus'},{e:'üå¥',w:'Palm',n:'Khajur'},{e:'üå≤',w:'Tree',n:'Ped'},{e:'üçÅ',w:'Maple Leaf',n:'Patta'},{e:'üçÑ',w:'Mushroom',n:'Khumb'},{e:'üåæ',w:'Wheat',n:'Gehun'},{e:'ü™∑',w:'Lotus',n:'Kamal'},{e:'üå±',w:'Seedling',n:'Ankur'}]},
  {id:'numbers',title:'Numbers 1‚Äì20',ico:'üî¢',sub:'Counting fun!',age:1,col:'#9C27B0',
   items:[{e:'1Ô∏è‚É£',w:'1 ‚Äî One',n:'Ek'},{e:'2Ô∏è‚É£',w:'2 ‚Äî Two',n:'Do'},{e:'3Ô∏è‚É£',w:'3 ‚Äî Three',n:'Teen'},{e:'4Ô∏è‚É£',w:'4 ‚Äî Four',n:'Chaar'},{e:'5Ô∏è‚É£',w:'5 ‚Äî Five',n:'Paanch'},{e:'6Ô∏è‚É£',w:'6 ‚Äî Six',n:'Cheh'},{e:'7Ô∏è‚É£',w:'7 ‚Äî Seven',n:'Saat'},{e:'8Ô∏è‚É£',w:'8 ‚Äî Eight',n:'Aath'},{e:'9Ô∏è‚É£',w:'9 ‚Äî Nine',n:'Nau'},{e:'üîü',w:'10 ‚Äî Ten',n:'Das'},{e:'1Ô∏è‚É£1Ô∏è‚É£',w:'11',n:'Gyarah'},{e:'1Ô∏è‚É£2Ô∏è‚É£',w:'12',n:'Barah'},{e:'1Ô∏è‚É£3Ô∏è‚É£',w:'13',n:'Terah'},{e:'1Ô∏è‚É£4Ô∏è‚É£',w:'14',n:'Chaudah'},{e:'1Ô∏è‚É£5Ô∏è‚É£',w:'15',n:'Pandrah'},{e:'2Ô∏è‚É£0Ô∏è‚É£',w:'20 ‚Äî Twenty',n:'Bees'}]},
  {id:'colours',title:'Colours',ico:'üé®',sub:'Rainbow ke rang!',age:1,col:'#FF9800',
   items:[{e:'‚ù§Ô∏è',w:'Red',n:'Laal'},{e:'üß°',w:'Orange',n:'Narangi'},{e:'üíõ',w:'Yellow',n:'Peela'},{e:'üíö',w:'Green',n:'Hara'},{e:'üíô',w:'Blue',n:'Neela'},{e:'üíú',w:'Purple',n:'Baingani'},{e:'üñ§',w:'Black',n:'Kaala'},{e:'ü§ç',w:'White',n:'Safed'},{e:'ü§é',w:'Brown',n:'Bhoora'},{e:'ü©∑',w:'Pink',n:'Gulabi'},{e:'ü©µ',w:'Sky Blue',n:'Aasmani'},{e:'ü©∂',w:'Grey',n:'Sleti'}]},
  {id:'spelling',title:'Spelling Challenge',ico:'üî°',sub:'Sahi spelling choose karo',age:2,col:'#2196F3',
   items:[{e:'üêò',w:'Elephant',n:'Pick correct spelling'},{e:'ü¶í',w:'Giraffe',n:'Pick correct spelling'},{e:'ü¶ã',w:'Butterfly',n:'Pick correct spelling'},{e:'üçé',w:'Apple',n:'Pick correct spelling'},{e:'üå∫',w:'Flower',n:'Pick correct spelling'},{e:'üê¨',w:'Dolphin',n:'Pick correct spelling'},{e:'üåª',w:'Sunflower',n:'Pick correct spelling'},{e:'ü¶Å',w:'Lion',n:'Pick correct spelling'}]},
  {id:'math',title:'Simple Maths',ico:'‚ûï',sub:'Add and subtract!',age:2,col:'#009688',
   items:[{e:'‚ûï',w:'2 + 3 = 5',n:'Addition'},{e:'‚ûï',w:'4 + 6 = 10',n:'Addition'},{e:'‚ûï',w:'7 + 8 = 15',n:'Addition'},{e:'‚ûñ',w:'10 - 4 = 6',n:'Subtraction'},{e:'‚ûñ',w:'15 - 7 = 8',n:'Subtraction'},{e:'‚ûï',w:'9 + 9 = 18',n:'Addition'},{e:'‚ûñ',w:'20 - 5 = 15',n:'Subtraction'},{e:'‚ûï',w:'6 + 7 = 13',n:'Addition'}]},
  {id:'gk',title:'General Knowledge',ico:'üåç',sub:'Duniya ke baare mein!',age:2,col:'#795548',
   items:[{e:'üáÆüá≥',w:'India',n:'Hamara Desh'},{e:'‚òÄÔ∏è',w:'Sun',n:'Nearest star'},{e:'üåô',w:'Moon',n:'Earth ka satellite'},{e:'üêü',w:'Fish',n:'Lives in water'},{e:'üåä',w:'Ocean',n:'Largest water body'},{e:'üèîÔ∏è',w:'Everest',n:'Highest mountain'},{e:'ü¶Å',w:'Lion',n:'King of jungle'},{e:'üåç',w:'Earth',n:'Our planet'}]},
  {id:'riddles',title:'Riddles & Jokes',ico:'üòÇ',sub:'Dimag lagao, haso!',age:2,col:'#FF5722',
   items:[{e:'ü§î',w:'Riddle 1',n:'Jitna khaata hai utna barhta hai?'},{e:'üòÑ',w:'Answer: Aag!',n:'Fire grows as it eats'},{e:'ü§î',w:'Riddle 2',n:'Bina paon chalta hai?'},{e:'üòÑ',w:'Answer: Ghadi!',n:'Clock runs without legs'},{e:'ü§î',w:'Riddle 3',n:'Do aankhen par dekh nahi sakta?'},{e:'üòÑ',w:'Answer: Aalu!',n:'Potato has eyes!'},{e:'üòÇ',w:'Joke 1',n:'Teacher: 2+2? Student: 4! Teacher: Good! Student: Good?? Brilliant bolna tha!'},{e:'üòÇ',w:'Joke 2',n:'Student: Main thak gaya. Teacher: Kyun? Student: Jawaabon se nahi ‚Äî sawaalon se!'}]}
];

var CURRTOPIC=null,QITEMS=[],QIDX=0,QSCORE=0;

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê STORAGE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function ls(k,v){try{if(v===undefined)return JSON.parse(localStorage.getItem(k));localStorage.setItem(k,JSON.stringify(v));}catch(e){return null;}}
function loadAll(){
  COMICS=ls('ch_c')||DC.slice();FB=ls('ch_fb')||[];STATS=ls('ch_st')||{};
  FAVS=ls('ch_fv')||[];HIST=ls('ch_hi')||[];NOTIFS=ls('ch_no')||[];REPLIES=ls('ch_rp')||[];
  U=Object.assign({name:'',avatar:'cheeku',lang:'hi',theme:'orange',dark:false,sound:true},ls('ch_u')||{});
  SK=Object.assign({last:'',count:0},ls('ch_sk')||{});
  XP=ls('ch_xp')||0;BADGES=ls('ch_bd')||[];
  ANN=ls('ch_an')||{active:false,text:''};MAINT=ls('ch_mt')||false;
  DEV_PW=ls('ch_pw')||'1234';
}
function saveC(){ls('ch_c',COMICS);}
function saveU(){ls('ch_u',U);}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SOUNDS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
var _actx=null;
function getACtx(){if(!_actx||_actx.state==='closed'){try{_actx=new(window.AudioContext||window.webkitAudioContext)();}catch(e){}}return _actx;}
function playTone(freq,type,dur,vol,startDelay){
  if(!U.sound)return;
  try{
    var C=getACtx();if(!C)return;
    var o=C.createOscillator(),g=C.createGain(),t=C.currentTime+(startDelay||0);
    o.type=type||'sine';o.frequency.value=freq;
    o.connect(g);g.connect(C.destination);
    g.gain.setValueAtTime(0,t);g.gain.linearRampToValueAtTime(vol||0.2,t+0.01);
    g.gain.exponentialRampToValueAtTime(0.001,t+dur);
    o.start(t);o.stop(t+dur+0.01);
  }catch(e){}
}
function snd(type){
  if(!U.sound)return;
  try{
    var C=getACtx();if(!C)return;
    if(type==='tap'){playTone(700,'sine',.07,.15);}
    else if(type==='ok'){playTone(523,'sine',.12,.18);playTone(659,'sine',.12,.18,.13);playTone(784,'sine',.18,.18,.26);}
    else if(type==='no'){playTone(200,'sawtooth',.25,.15);playTone(160,'sawtooth',.2,.12,.1);}
    else if(type==='dice'){
      var t=C.currentTime;
      for(var i=0;i<6;i++){var oo=C.createOscillator(),gg=C.createGain();oo.type='square';oo.frequency.value=150+Math.random()*200;oo.connect(gg);gg.connect(C.destination);gg.gain.setValueAtTime(.08,t+i*.04);gg.gain.exponentialRampToValueAtTime(.001,t+i*.04+.04);oo.start(t+i*.04);oo.stop(t+i*.04+.05);}
    }
    else if(type==='flip'){playTone(400,'sine',.06,.1);playTone(600,'sine',.06,.1,.07);}
    else if(type==='badge'){playTone(523,'sine',.1,.2);playTone(659,'sine',.1,.2,.11);playTone(784,'sine',.1,.2,.22);playTone(1047,'sine',.22,.2,.33);}
    else if(type==='lvlup'){[523,659,784,1047,1319].forEach(function(f,i){playTone(f,'sine',.18,.22,i*.09);});}
    else if(type==='notif'){playTone(880,'sine',.08,.15);playTone(1047,'sine',.12,.15,.09);}
    else if(type==='whoosh'){
      var t2=C.currentTime;var oo2=C.createOscillator(),gg2=C.createGain();
      oo2.type='sawtooth';oo2.frequency.setValueAtTime(300,t2);oo2.frequency.exponentialRampToValueAtTime(1200,t2+.18);
      oo2.connect(gg2);gg2.connect(C.destination);gg2.gain.setValueAtTime(.12,t2);gg2.gain.exponentialRampToValueAtTime(.001,t2+.2);oo2.start(t2);oo2.stop(t2+.22);
    }
    else if(type==='win'){[659,784,880,1047,1319,1047,1319].forEach(function(f,i){playTone(f,'sine',.15,.25,i*.1);});}
    else if(type==='match'){playTone(784,'sine',.12,.2);playTone(1047,'sine',.16,.2,.13);}
    else if(type==='coin'){playTone(1047,'square',.07,.1);playTone(1319,'square',.1,.1,.08);}
  }catch(e){}
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê RIPPLE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function addRipple(e,el){
  var r=document.createElement('span');r.className='ripple';
  var rect=el.getBoundingClientRect();
  var size=Math.max(rect.width,rect.height)*2;
  r.style.cssText='width:'+size+'px;height:'+size+'px;left:'+(e.clientX-rect.left-size/2)+'px;top:'+(e.clientY-rect.top-size/2)+'px;';
  el.appendChild(r);setTimeout(function(){r.remove();},600);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê CONFETTI ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function confetti(){
  var l=document.getElementById('cfLayer');l.innerHTML='';
  var cols=['#FF6B00','#FFD700','#00C853','#2196F3','#E91E63','#9C27B0','#FF4081'];
  for(var i=0;i<60;i++){var c=document.createElement('div');c.className='cf';c.style.cssText='left:'+Math.random()*100+'%;width:'+(5+Math.random()*9)+'px;height:'+(5+Math.random()*9)+'px;background:'+cols[Math.floor(Math.random()*cols.length)]+';animation-duration:'+(0.8+Math.random()*1.5)+'s;animation-delay:'+(Math.random()*.5)+'s;';l.appendChild(c);}
  setTimeout(function(){l.innerHTML='';},3000);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê RANKS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function getRank(xp){var r=RANKS[0];for(var i=0;i<RANKS.length;i++){if(xp>=RANKS[i].min)r=RANKS[i];else break;}return r;}
function getNextRank(xp){for(var i=0;i<RANKS.length;i++){if(xp<RANKS[i].min)return RANKS[i];}return null;}
function updateRankDisplay(){
  var r=getRank(XP),nr=getNextRank(XP);
  var charEmo=CHARS.find(function(c){return c.id===U.avatar;})||CHARS[0];
  var el=document.getElementById('hdrChar');if(el)el.textContent=charEmo.e;
  var un=document.getElementById('hdrName');if(un)un.textContent=U.name||'Player';
  var rk=document.getElementById('hdrRank');if(rk)rk.textContent=r.ico+' '+r.title;
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê XP & BADGES ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
var _lastRank='';
function addXP(n){
  var oldRank=getRank(XP).title;
  XP+=n;ls('ch_xp',XP);updateXPBar();
  var t=document.getElementById('xpToast');t.textContent='+'+n+' XP ‚≠ê';t.style.display='block';snd('coin');
  setTimeout(function(){t.style.display='none';},1400);
  var newRank=getRank(XP).title;
  if(newRank!==oldRank){showLevelUp(newRank);snd('lvlup');}
  checkBadges();updateRankDisplay();
}
function showLevelUp(rankName){
  var el=document.getElementById('lvlToast'),r=getRank(XP);
  document.getElementById('lvlTitle').textContent=r.ico+' Rank Up!';
  document.getElementById('lvlSub').textContent='Ab tum '+rankName+' ho! üéâ';
  el.classList.add('show');confetti();
  setTimeout(function(){el.classList.remove('show');},2800);
}
function updateXPBar(){
  var e=document.getElementById('xpLbl');if(e)e.textContent=XP+' XP';
  var f=document.getElementById('xpFill');if(f){var r=getRank(XP),nr=getNextRank(XP);if(nr){var pct=Math.round(((XP-r.min)/(nr.min-r.min))*100);f.style.width=pct+'%';}else f.style.width='100%';}
  updateRankDisplay();
}
function checkBadges(){
  var tot=Object.values(STATS).reduce(function(a,b){return a+b;},0);
  BDEFS.forEach(function(b){
    if(BADGES.indexOf(b.id)>-1)return;
    var earn=false;
    if(b.opens&&tot>=b.opens)earn=true;
    if(b.streak&&SK.count>=b.streak)earn=true;
    if(b.xp&&XP>=b.xp)earn=true;
    if(b.fav&&FAVS.length>=b.fav)earn=true;
    if(b.both){var hH=Object.keys(STATS).some(function(id){var c=COMICS.find(function(x){return x.id==id;});return c&&c.lang==='hi';});var hE=Object.keys(STATS).some(function(id){var c=COMICS.find(function(x){return x.id==id;});return c&&c.lang==='en';});earn=hH&&hE;}
    if(earn){BADGES.push(b.id);ls('ch_bd',BADGES);showBadgeToast(b);snd('badge');}
  });
}
function showBadgeToast(b){var t=document.getElementById('badgeToast');document.getElementById('btIco').textContent=b.ico;document.getElementById('btTxt').textContent='Badge: '+b.name+'!';t.style.display='flex';setTimeout(function(){t.style.display='none';},3200);}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê STREAK ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function updateStreak(){
  var today=new Date().toDateString(),yest=new Date(Date.now()-86400000).toDateString();
  if(SK.last===today){}
  else if(SK.last===yest){SK.count++;SK.last=today;FIRST_TODAY=true;}
  else{SK.count=1;SK.last=today;FIRST_TODAY=true;}
  ls('ch_sk',SK);
  var t=document.getElementById('strkTitle'),s=document.getElementById('strkSub'),f=document.getElementById('strkFire');
  if(t)t.textContent=SK.count>1?SK.count+' Day Streak! üî•':'Reading Streak';
  if(s)s.textContent=SK.count>1?'Zabardast! '+SK.count+' din!':'Read today to start!';
  if(f)f.style.animation=SK.count>=3?'bounce 1s ease-in-out infinite':'none';
  updateXPBar();
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê THUMBNAILS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function thumb(c){return c.thumbUrl||c.flipUrl.replace(/\/$/,'')+'/files/large/1.jpg';}
function thumbErr(img,url,col){
  var tried=parseInt(img.dataset.tried||'0');img.dataset.tried=tried+1;img.onerror=null;
  if(tried===0){img.onerror=function(){thumbErr(img,url,col);};img.src=url.replace(/\/$/,'')+'/files/mobile/1.jpg';}
  else if(tried===1){img.onerror=function(){thumbErr(img,url,col);};img.src='https://image.thum.io/get/width/400/crop/550/noanimate/'+url;}
  else{img.style.display='none';var p=document.createElement('div');p.style.cssText='position:absolute;inset:0;background:'+col+';display:flex;flex-direction:column;align-items:center;justify-content:center;gap:4px;';p.innerHTML='<div style="font-size:28px">üìï</div><div style="font-size:8px;font-weight:800;color:rgba(255,255,255,.8)">CHAMPAK</div>';img.parentElement.appendChild(p);}
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê NOTIFICATIONS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function addNotif(ico,text,isReply){
  NOTIFS.unshift({ico:ico,text:text,time:new Date().toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'}),read:false,isReply:!!isReply});
  if(NOTIFS.length>40)NOTIFS=NOTIFS.slice(0,40);
  ls('ch_no',NOTIFS);updateNotifDot();snd('notif');
}
function updateNotifDot(){var u=NOTIFS.filter(function(n){return !n.read;}).length;document.getElementById('notifDot').style.display=u>0?'block':'none';}
function openNotif(){
  document.getElementById('notifPanel').classList.add('open');document.getElementById('notifOv').classList.add('show');
  NOTIFS.forEach(function(n){n.read=true;});ls('ch_no',NOTIFS);updateNotifDot();renderNotifs();
}
function closeNotif(){document.getElementById('notifPanel').classList.remove('open');document.getElementById('notifOv').classList.remove('show');}
function renderNotifs(){
  var el=document.getElementById('notifList');
  if(!NOTIFS.length){el.innerHTML='<div class="notif-empty">üì≠ Koi notification nahi<br><small style="font-size:11px;">Nayi comics aur dev replies yahan!</small></div>';return;}
  el.innerHTML=NOTIFS.map(function(n){return '<div class="notif-item'+(n.isReply?' reply-msg':'')+'"><div style="font-size:21px;flex-shrink:0;">'+n.ico+'</div><div><div style="font-size:12px;font-weight:700;color:var(--text);">'+n.text+'</div><div style="font-size:10px;color:var(--sub);margin-top:2px;">'+n.time+'</div></div></div>';}).join('');
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê INBOX ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function renderInbox(){
  var el=document.getElementById('inboxScr');el.innerHTML='';
  var myReplies=REPLIES.filter(function(r){return !r.hidden;});
  var ic=document.getElementById('inboxCount');
  var unread=myReplies.filter(function(r){return !r.userRead;}).length;
  if(ic)ic.textContent=unread>0?unread+' unread replies':'Dev replies aayenge yahan';
  if(!myReplies.length){el.innerHTML='<div style="text-align:center;padding:50px 18px;color:var(--sub);font-size:14px;font-weight:700;">üì≠ Abhi koi reply nahi<br><br><small style="font-size:12px;">Feedback bhejo ‚Äî Baadal zaroor reply karega! üòä</small></div>';return;}
  myReplies.forEach(function(r,i){
    r.userRead=true;
    var typeIco={idea:'üí°',bug:'üêõ',msg:'üí¨',request:'üìñ'}[r.type]||'üì©';
    var d=document.createElement('div');d.className='msg-item';
    d.innerHTML='<div class="msg-type-badge" style="background:rgba(255,107,0,.12);color:var(--a);">'+typeIco+' '+r.type.toUpperCase()+'</div><div class="msg-body"><strong>Tu:</strong> '+r.msg+'</div><div class="msg-meta">'+r.time+'</div>'+(r.reply?'<div class="msg-reply"><div class="msg-reply-lbl">üí¨ Baadal ka Reply:</div><div class="msg-reply-txt">'+r.reply+'</div><div style="font-size:9px;color:var(--sub);margin-top:3px;">'+r.replyTime+'</div></div>':'<div style="margin-top:8px;font-size:11px;color:var(--sub);">‚è≥ Reply ka wait karo...</div>');
    el.appendChild(d);
  });
  ls('ch_rp',REPLIES);
  if(ic)ic.textContent='Inbox ('+myReplies.length+')';
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê ONBOARD ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function buildCharGrid(){
  var el=document.getElementById('charGrid');if(!el)return;el.innerHTML='';
  CHARS.forEach(function(c,i){
    var d=document.createElement('div');d.className='char-btn'+(i===0?' sel':'');d.dataset.id=c.id;
    d.innerHTML='<div class="char-btn-e">'+c.e+'</div><div class="char-btn-n">'+c.name+'</div>';
    d.onclick=function(){document.querySelectorAll('.char-btn').forEach(function(b){b.classList.remove('sel');});d.classList.add('sel');U.avatar=c.id;snd('tap');};
    el.appendChild(d);
  });
  U.avatar='cheeku';
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê APP START ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function startApp(){
  loadAll();snd('tap');
  if(MAINT){document.getElementById('maintScreen').classList.add('show');return;}
  var sp=document.getElementById('pgSplash');sp.style.opacity='0';
  setTimeout(function(){sp.style.display='none';if(!ls('ch_launched')){ls('ch_launched',true);showPage('pgOnboard');buildCharGrid();}else bootHome();},820);
}
function saveNameAndStart(){
  var n=document.getElementById('nameIn').value.trim();
  U.name=n||'Dost';saveU();confetti();snd('ok');
  setTimeout(bootHome,700);
}
function bootHome(){
  applyTheme(U.theme);applyDark(U.dark);updateStreak();updateXPBar();
  renderHome();showPage('pgHome');setNav('home');updateGreeting();
  renderAnn();renderCOTD();checkNewBadge();updateNotifDot();renderLearn();
}
function updateGreeting(){
  var el=document.getElementById('hdrRank');
  updateRankDisplay();
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê HOME ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
var COLS=['#FF6B00','#0066CC','#009944','#8B00CC','#CC6600','#CC0000','#007788'];
function renderHome(q){
  var fq=q?q.toLowerCase():null;
  var vis=COMICS.filter(function(c){return !c.isHidden;});
  function filt(lang){return vis.filter(function(c){return c.lang===lang&&(!fq||c.name.toLowerCase().indexOf(fq)>-1);}).sort(function(a,b){return (b.isPinned?1:0)-(a.isPinned?1:0);});}
  renderLibGrid('libHi',filt('hi').slice(0,4));
  renderLibGrid('libEn',filt('en').slice(0,4));
}
function renderLibGrid(id,list){
  var el=document.getElementById(id);if(!el)return;el.innerHTML='';
  if(!list.length){el.innerHTML='<div style="grid-column:1/-1;text-align:center;padding:14px;color:#bbb;font-size:12px;font-weight:700;">Abhi koi comic nahi üòä</div>';return;}
  list.forEach(function(c,i){
    var col=COLS[i%COLS.length],isFav=FAVS.indexOf(c.id)>-1;
    var d=document.createElement('div');d.className='lcard ripple-wrap';d.style.animationDelay=(i*.07)+'s';
    var lb=c.lang==='hi'?'<span class="cbadge bl b-hi">‡§π‡§ø‡§Ç‡§¶‡•Ä</span>':'<span class="cbadge bl b-en">ENG</span>';
    var rb=c.isPinned?'<span class="cbadge br b-pin">üìå</span>':c.isNew?'<span class="cbadge br b-new">NEW</span>':isFav?'<span class="cbadge br" style="background:#e91e63;color:#fff;font-size:10px;">‚ù§Ô∏è</span>':'';
    d.innerHTML='<div class="lcard-thumb"><img src="'+thumb(c)+'" loading="lazy" onerror="thumbErr(this,\''+c.flipUrl+'\',\''+col+'\')">'+lb+rb+'</div><div class="lcard-name">'+c.name+'</div><button class="lread-btn">Read Now</button>';
    d.onclick=function(e){addRipple(e,d);openComic(c);};el.appendChild(d);
  });
}
function renderCOTD(){
  var vis=COMICS.filter(function(c){return !c.isHidden;});
  if(!vis.length){document.getElementById('cotdWrap').style.display='none';return;}
  document.getElementById('cotdWrap').style.display='block';
  var c=vis[(new Date().getDate()+new Date().getMonth())%vis.length];
  document.getElementById('cotdTitle').textContent=c.name;
  document.getElementById('cotdSub').textContent=(c.date||'')+(c.pages?' ‚Ä¢ '+c.pages+'p':'');
  document.getElementById('cotdImg').src=thumb(c);
  document.getElementById('cotdBtn').onclick=function(){openComic(c);};
}
function renderAnn(){var b=document.getElementById('annBar');if(ANN.active&&ANN.text){document.getElementById('annTxt').textContent=ANN.text;b.style.display='flex';}else b.style.display='none';}
function closeAnn(){document.getElementById('annBar').style.display='none';}
function checkNewBadge(){var n=COMICS.filter(function(c){return c.isNew&&!c.isHidden;}).length;var b=document.getElementById('newBadge');if(n>0){b.textContent=n;b.style.display='flex';}else b.style.display='none';}
function doSearch(v){renderHome(v||null);}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê COMICS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function renderAllGrid(tab){
  tab=tab||CTAB;
  var vis=COMICS.filter(function(c){return !c.isHidden;});
  var list=vis.filter(function(c){return tab==='all'||c.lang===tab;}).sort(function(a,b){return (b.isPinned?1:0)-(a.isPinned?1:0)||(b.id-a.id);});
  var hi=vis.filter(function(c){return c.lang==='hi';}).length,en=vis.filter(function(c){return c.lang==='en';}).length;
  document.getElementById('allCount').textContent=hi+' Hindi ‚Ä¢ '+en+' English';
  var el=document.getElementById('allGrid');el.innerHTML='';
  if(!list.length){el.innerHTML='<div class="no-items">Abhi koi comic nahi üòä</div>';return;}
  list.forEach(function(c,i){
    var col=COLS[i%COLS.length],isFav=FAVS.indexOf(c.id)>-1;
    var d=document.createElement('div');d.className='acard';d.style.animationDelay=(i*.05)+'s';
    var lb=c.lang==='hi'?'<span class="cbadge bl b-hi">‡§π‡§ø‡§Ç‡§¶‡•Ä</span>':'<span class="cbadge bl b-en">ENG</span>';
    d.innerHTML='<div class="acard-thumb"><img src="'+thumb(c)+'" loading="lazy" onerror="thumbErr(this,\''+c.flipUrl+'\',\''+col+'\')"><div class="acard-ov"></div>'+lb+(c.isPinned?'<span class="cbadge" style="top:7px;right:7px;background:#FFD700;color:#8B1A00;">üìå</span>':c.date?'<div class="acard-date">'+c.date+'</div>':'')+(c.isNew?'<span class="cbadge bl b-new" style="top:auto;bottom:7px;">NEW</span>':'')+(c.pages?'<div class="acard-pages">'+c.pages+'p</div>':'')+'</div><div class="acard-info"><div class="acard-name">'+c.name+'</div><div style="display:flex;gap:5px;"><button class="aread-btn ripple-wrap" id="rb'+c.id+'">üìñ Read</button><button id="fvb'+c.id+'" style="width:34px;background:'+(isFav?'#e91e63':'rgba(255,100,0,.1)')+';border:2px solid '+(isFav?'#e91e63':'rgba(255,100,0,.2)')+';border-radius:8px;cursor:pointer;font-size:13px;">'+(isFav?'‚ù§Ô∏è':'ü§ç')+'</button></div></div>';
    d.onclick=function(e){addRipple(e,d);openComic(c);};
    d.querySelector('#rb'+c.id).onclick=function(e){e.stopPropagation();addRipple(e,this);openComic(c);};
    (function(comic,btn){btn.onclick=function(e){e.stopPropagation();toggleFav(comic.id,btn);};})(c,d.querySelector('#fvb'+c.id));
    el.appendChild(d);
  });
}
function switchTab(t){CTAB=t;document.querySelectorAll('.cat-tab').forEach(function(x){x.classList.remove('on');});document.getElementById('tab-'+t).classList.add('on');snd('whoosh');renderAllGrid(t);}
function goComics(t){CTAB=t||'all';showPage('pgSeeAll');setNav('comics');snd('whoosh');setTimeout(function(){switchTab(CTAB);},40);}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê FAVS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function toggleFav(id,btn){snd('tap');var idx=FAVS.indexOf(id);if(idx>-1)FAVS.splice(idx,1);else{FAVS.push(id);snd('match');}ls('ch_fv',FAVS);if(btn){var on=FAVS.indexOf(id)>-1;btn.textContent=on?'‚ù§Ô∏è':'ü§ç';btn.style.background=on?'#e91e63':'rgba(255,100,0,.1)';}checkBadges();}
function openFavsOv(){renderFavsGrid();document.getElementById('favsOv').classList.add('show');snd('whoosh');}
function closeFavsOv(e){if(!e||e.target===document.getElementById('favsOv'))document.getElementById('favsOv').classList.remove('show');}
function renderFavsGrid(){
  var el=document.getElementById('favsGrid');el.innerHTML='';
  var list=COMICS.filter(function(c){return FAVS.indexOf(c.id)>-1&&!c.isHidden;});
  if(!list.length){el.innerHTML='<div class="no-items">‚ù§Ô∏è Koi favourite nahi<br><small>Comics mein dil lagao!</small></div>';return;}
  list.forEach(function(c,i){
    var col=COLS[i%COLS.length],d=document.createElement('div');d.className='fav-card';
    d.innerHTML='<div class="fav-thumb"><img src="'+thumb(c)+'" loading="lazy" onerror="thumbErr(this,\''+c.flipUrl+'\',\''+col+'\')"></div><div class="fav-name">'+c.name+'</div><button class="fav-rm" onclick="event.stopPropagation();removeFav('+c.id+')">Remove ‚úï</button>';
    d.onclick=function(){closeFavsOv();openComic(c);};el.appendChild(d);
  });
}
function removeFav(id){FAVS=FAVS.filter(function(x){return x!==id;});ls('ch_fv',FAVS);renderFavsGrid();snd('tap');}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê OPEN COMIC ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function openComic(c){
  snd('whoosh');STATS[c.id]=(STATS[c.id]||0)+1;ls('ch_st',STATS);
  HIST=HIST.filter(function(h){return h.id!==c.id;});
  HIST.unshift({id:c.id,name:c.name,date:new Date().toLocaleDateString(),t:thumb(c)});
  if(HIST.length>10)HIST=HIST.slice(0,10);ls('ch_hi',HIST);
  if(FIRST_TODAY){confetti();FIRST_TODAY=false;}
  addXP(10);checkBadges();
  document.getElementById('ovOpen').classList.add('show');
  setTimeout(function(){window.location.href=c.flipUrl;},1000);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê GAMES - TTT ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
var tttB=[],tttT='X',tttMode='ai',tttOn=false,tttSc={X:0,O:0};
var tttW=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
function initTTT(){tttB=Array(9).fill('');tttT='X';tttOn=true;showPage('pgTTT');setNav('games');document.getElementById('tttSt').textContent='‚ùå ka turn';renderTTT();document.getElementById('tttSc').textContent='‚ùå '+tttSc.X+' ‚Äî '+tttSc.O+' ‚≠ï';snd('whoosh');}
function setTTTMode(m,btn){tttMode=m;document.querySelectorAll('.ttt-mode-btn').forEach(function(b){b.classList.remove('on');});btn.classList.add('on');snd('tap');initTTT();}
function renderTTT(){var el=document.getElementById('tttBoard');el.innerHTML='';tttB.forEach(function(v,i){var c=document.createElement('div');c.className='ttt-cell ripple-wrap'+(v?' '+v.toLowerCase():'');c.textContent=v;c.onclick=function(e){addRipple(e,c);tttClick(i);};el.appendChild(c);});}
function tttClick(i){if(!tttOn||tttB[i])return;snd('tap');tttB[i]=tttT;var cells=document.getElementById('tttBoard').children;cells[i].textContent=tttT;cells[i].className='ttt-cell ripple-wrap '+tttT.toLowerCase();var w=tttCheck();if(w){tttEnd(w);return;}if(tttB.every(function(x){return x;})){tttEnd(null);return;}tttT=tttT==='X'?'O':'X';document.getElementById('tttSt').textContent=(tttT==='X'?'‚ùå':'‚≠ï')+' ka turn';if(tttMode==='ai'&&tttT==='O'&&tttOn)setTimeout(tttAI,420);}
function tttAI(){var best=-99,move=0;for(var i=0;i<9;i++){if(!tttB[i]){tttB[i]='O';var sc=tttMini(0,false);tttB[i]='';if(sc>best){best=sc;move=i;}}}tttClick(move);}
function tttMini(d,isMax){var w=tttCheck();if(w==='O')return 10-d;if(w==='X')return d-10;if(tttB.every(function(x){return x;}))return 0;if(isMax){var b=-99;for(var i=0;i<9;i++){if(!tttB[i]){tttB[i]='O';b=Math.max(b,tttMini(d+1,false));tttB[i]='';}}return b;}else{var b2=99;for(var j=0;j<9;j++){if(!tttB[j]){tttB[j]='X';b2=Math.min(b2,tttMini(d+1,true));tttB[j]='';}}return b2;}}
function tttCheck(){for(var i=0;i<tttW.length;i++){var c=tttW[i];if(tttB[c[0]]&&tttB[c[0]]===tttB[c[1]]&&tttB[c[0]]===tttB[c[2]]){var cells=document.getElementById('tttBoard').children;[c[0],c[1],c[2]].forEach(function(x){cells[x].classList.add('win');});return tttB[c[0]];}}return null;}
function tttEnd(w){tttOn=false;if(w){tttSc[w]++;snd('win');confetti();document.getElementById('tttSt').textContent=(w==='X'?'‚ùå':'‚≠ï')+' Jeet Gaya! üéâ';}else{snd('no');document.getElementById('tttSt').textContent='Draw! ü§ù';}document.getElementById('tttSc').textContent='‚ùå '+tttSc.X+' ‚Äî '+tttSc.O+' ‚≠ï';addXP(5);}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê GAMES - SNAKE LADDER ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
var SL_SN={97:25,70:40,54:18,35:12,22:7},SL_LD={4:56,13:76,33:65,51:86,62:93};
var slP=[],slCur=0,slRolling=false;
var SLC=['#FF4444','#4444FF','#44BB44','#FF9900'],SLE=['üî¥','üîµ','üü¢','üü°'];
function initSL(){slP=[{name:'P1',pos:0,color:SLC[0],e:SLE[0]},{name:'P2',pos:0,color:SLC[1],e:SLE[1]}];slCur=0;slRolling=false;showPage('pgSnake');setNav('games');snd('whoosh');buildSLBoard();renderSLPlayers();document.getElementById('slLog').textContent='Game shuru! P1 ka turn üé≤';}
function buildSLBoard(){
  var el=document.getElementById('slBoard');el.innerHTML='';
  for(var row=9;row>=0;row--){for(var col=0;col<10;col++){var num=row%2===0?row*10+(col+1):row*10+(10-col);var c=document.createElement('div');c.className='sl-cell '+(Math.floor((num-1)/10)%2===0?'sl-er':'sl-or');c.id='slc'+num;c.innerHTML='<span class="sl-num">'+num+'</span>'+(SL_SN[num]?'üêç':'')+(SL_LD[num]?'ü™ú':'');el.appendChild(c);}}
  renderSLTokens();
}
function renderSLTokens(){document.querySelectorAll('.sl-token').forEach(function(t){t.remove();});slP.forEach(function(p,i){if(p.pos>0){var cell=document.getElementById('slc'+p.pos);if(cell){var t=document.createElement('div');t.className='sl-token';t.style.cssText='background:'+p.color+';top:'+(2+i*15)+'px;right:'+(2+i*6)+'px;';t.textContent=p.e;cell.appendChild(t);}}});}
function renderSLPlayers(){var el=document.getElementById('slPlayers');el.innerHTML='';slP.forEach(function(p,i){var d=document.createElement('div');d.className='sl-player'+(i===slCur?' cur':'');d.style.cssText='background:'+p.color+'22;border-color:'+(i===slCur?p.color:'transparent')+';';d.innerHTML='<div style="font-size:10px;font-weight:800;color:'+p.color+'">'+p.e+' '+p.name+'</div><div style="font-size:18px;font-weight:800;font-family:Lilita One,cursive;color:'+p.color+'">'+p.pos+'</div>';el.appendChild(d);});}
function slRoll(){
  if(slRolling)return;slRolling=true;snd('dice');
  var btn=document.getElementById('slDice');btn.classList.add('rolling');btn.textContent='üé≤ Rolling...';
  setTimeout(function(){
    btn.classList.remove('rolling');
    var dice=Math.floor(Math.random()*6)+1,p=slP[slCur],newPos=p.pos+dice;
    var log=p.e+' '+p.name+' rolled '+dice+'! ';
    if(newPos>100)newPos=p.pos;
    else if(SL_SN[newPos]){log+='üêç Snake! '+newPos+'‚Üí'+SL_SN[newPos];newPos=SL_SN[newPos];snd('no');}
    else if(SL_LD[newPos]){log+='ü™ú Ladder! '+newPos+'‚Üí'+SL_LD[newPos];newPos=SL_LD[newPos];snd('ok');}
    p.pos=newPos;renderSLTokens();
    if(newPos>=100){log+=' üèÜ JEET GAYA!';document.getElementById('slDice').disabled=true;confetti();snd('win');addXP(20);}
    document.getElementById('slLog').textContent=log;
    btn.textContent='üé≤ Dice Phenko!';
    slCur=(slCur+1)%slP.length;slRolling=false;renderSLPlayers();
  },600);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê GAMES - MEMORY ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
var MEMS=['ü¶Å','üêØ','üêª','ü¶ä','üêº','üê®','üê∏','üêµ'];
var memCards=[],memFlipped=[],memPairs=0,memMoves=0,memLocked=false,memTimer=null,memSecs=0;
function initMem(){
  clearInterval(memTimer);memSecs=0;memPairs=0;memMoves=0;memFlipped=[];memLocked=false;
  var pairs=MEMS.concat(MEMS).sort(function(){return Math.random()-.5;});
  memCards=pairs.map(function(e,i){return {id:i,e:e,flipped:false,matched:false};});
  showPage('pgMemory');setNav('games');snd('whoosh');renderMemBoard();updateMemStats();
  memTimer=setInterval(function(){memSecs++;document.getElementById('memT').textContent=memSecs+'s';},1000);
}
function renderMemBoard(){var el=document.getElementById('memBoard');el.innerHTML='';memCards.forEach(function(c){var d=document.createElement('div');d.className='mem-card'+(c.flipped?' flipped':'')+(c.matched?' matched':'');d.innerHTML='<div class="mem-card-inner"><div class="mem-card-front">üé¥</div><div class="mem-card-back">'+c.e+'</div></div>';d.onclick=function(){memFlip(c.id);};el.appendChild(d);});}
function memFlip(id){if(memLocked)return;var c=memCards[id];if(c.flipped||c.matched)return;snd('flip');c.flipped=true;memFlipped.push(id);renderMemBoard();if(memFlipped.length===2){memMoves++;memLocked=true;var a=memCards[memFlipped[0]],b=memCards[memFlipped[1]];if(a.e===b.e){a.matched=b.matched=true;memPairs++;memFlipped=[];memLocked=false;snd('match');updateMemStats();if(memPairs===MEMS.length){clearInterval(memTimer);confetti();snd('win');addXP(15);setTimeout(function(){alert('üèÜ Zabardast! '+memMoves+' moves, '+memSecs+'s!');},300);}}else{setTimeout(function(){a.flipped=b.flipped=false;memFlipped=[];memLocked=false;renderMemBoard();updateMemStats();},900);}}updateMemStats();}
function updateMemStats(){document.getElementById('memM').textContent=memMoves;document.getElementById('memP').textContent=memPairs;}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê GAMES - LUDO ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
var luP=[],luCur=0,luRolling=false;
function initLudo(){luP=[{name:'P1',color:'#FF4444',e:'üî¥',tokens:[0,0,0,0],home:0},{name:'P2',color:'#4444FF',e:'üîµ',tokens:[0,0,0,0],home:0}];luCur=0;luRolling=false;showPage('pgLudo');setNav('games');snd('whoosh');renderLudoZones();renderLuPlayers();document.getElementById('luLog').textContent='Game shuru! P1 ka turn üé≤';}
function renderLudoZones(){['lzTL','lzTR','lzBL','lzBR'].forEach(function(zid,pi){var el=document.getElementById(zid);el.innerHTML='';for(var t=0;t<4;t++){var d=document.createElement('div');d.className='ludo-home';var on=pi<2&&luP[pi]&&luP[pi].tokens[t]===0;d.innerHTML='<span>'+(on?luP[pi].e:'')+'</span>';el.appendChild(d);}});}
function renderLuPlayers(){var el=document.getElementById('luPlayers');el.innerHTML='';luP.forEach(function(p,i){var d=document.createElement('div');d.className='ludo-player'+(i===luCur?' cur':'');d.style.cssText='background:'+p.color+'22;border-color:'+(i===luCur?p.color:'transparent')+';';d.innerHTML='<div style="font-size:11px;font-weight:800;color:'+p.color+'">'+p.e+' '+p.name+'</div><div style="font-size:16px;font-weight:800;font-family:Lilita One,cursive;color:'+p.color+'">Home: '+p.home+'</div>';el.appendChild(d);});}
function luRoll(){
  if(luRolling)return;luRolling=true;snd('dice');
  var btn=document.getElementById('luDice');btn.textContent='üé≤ Rolling...';
  setTimeout(function(){
    var dice=Math.floor(Math.random()*6)+1,p=luP[luCur];
    var out=p.tokens.filter(function(t){return t>0;}).length;
    var log=p.e+' '+p.name+' rolled '+dice+'! ';
    if(dice===6){var idx=p.tokens.indexOf(0);if(idx>-1){p.tokens[idx]=1;log+='Token out! üéâ';snd('ok');}else{var mi=p.tokens.reduce(function(best,v,i){return(v>0&&v<(p.tokens[best]||99))?i:best;},0);p.tokens[mi]=Math.min(p.tokens[mi]+6,57);if(p.tokens[mi]>=57){p.home++;p.tokens[mi]=0;log+='Home! üè†';snd('ok');confetti();addXP(10);}}}
    else{if(out>0){var mi2=p.tokens.reduce(function(best,v,i){return(v>0&&v<(p.tokens[best]||99))?i:best;},0);p.tokens[mi2]=Math.min(p.tokens[mi2]+dice,57);if(p.tokens[mi2]>=57){p.home++;p.tokens[mi2]=0;log+='Home! üè†';snd('ok');confetti();addXP(10);}}else log+='Roll 6 to start!';}
    if(p.home>=4){log+=' üèÜ JEET GAYA!';document.getElementById('luDice').disabled=true;confetti();snd('win');addXP(25);}
    document.getElementById('luLog').textContent=log;
    renderLudoZones();renderLuPlayers();
    btn.textContent='üé≤ Dice Phenko!';
    if(dice!==6)luCur=(luCur+1)%luP.length;
    luRolling=false;renderLuPlayers();
  },600);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê LEARN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function renderLearn(){
  var g1=document.getElementById('lg1'),g2=document.getElementById('lg2');
  if(!g1||!g2)return;g1.innerHTML='';g2.innerHTML='';
  TOPICS.forEach(function(t,i){
    var d=document.createElement('div');d.className='topic-card ripple-wrap';d.style.animationDelay=(i*.06)+'s';
    d.innerHTML='<div class="topic-ico">'+t.ico+'</div><div class="topic-title">'+t.title+'</div><div class="topic-sub">'+t.sub+'</div><div class="topic-prog"><div style="height:100%;width:0%;background:'+t.col+';border-radius:3px;"></div></div>';
    d.onclick=function(e){addRipple(e,d);snd('tap');openTopic(t);};
    if(t.age===1)g1.appendChild(d);else g2.appendChild(d);
  });
}
function openTopic(t){
  CURRTOPIC=t;document.getElementById('topicTitle').textContent=t.ico+' '+t.title;showPage('pgTopic');snd('whoosh');
  var el=document.getElementById('topicGrid');el.innerHTML='';
  t.items.forEach(function(item,i){
    var d=document.createElement('div');d.className='lrn-card ripple-wrap';d.style.animationDelay=(i*.04)+'s';
    d.innerHTML='<span class="lrn-e">'+item.e+'</span><div class="lrn-w">'+item.w+'</div><div class="lrn-n">'+item.n+'</div>';
    d.onclick=function(e){addRipple(e,d);snd('tap');};el.appendChild(d);
  });
}
function startQuiz(){
  if(!CURRTOPIC)return;
  QITEMS=CURRTOPIC.items.filter(function(x){return x.w&&x.n;}).slice(0,8);
  if(QITEMS.length<4){alert('Quiz ke liye kafi items nahi!');return;}
  QIDX=0;QSCORE=0;showPage('pgQuiz');snd('whoosh');renderQ();
}
function renderQ(){
  var wrap=document.getElementById('quizWrap');
  if(QIDX>=QITEMS.length){showQResult(wrap);return;}
  var q=QITEMS[QIDX];
  var wrong=QITEMS.filter(function(x,i){return i!==QIDX;}).sort(function(){return Math.random()-.5;}).slice(0,3).map(function(x){return x.w;});
  var opts=[q.w].concat(wrong).sort(function(){return Math.random()-.5;});
  var pct=Math.round((QIDX/QITEMS.length)*100);
  wrap.innerHTML='<div><div class="q-prog-bar"><div class="q-prog-fill" style="width:'+pct+'%"></div></div><div style="font-size:11px;font-weight:700;color:var(--sub);margin-top:4px;">Question '+(QIDX+1)+' / '+QITEMS.length+'</div></div>'+
    '<div class="quiz-question"><span class="q-emoji">'+q.e+'</span><div class="q-text">What is this?</div></div>'+
    '<div class="quiz-opts">'+opts.map(function(o,oi){return '<button class="q-opt ripple-wrap" id="qo'+oi+'" onclick="addRipple(event,this);ansQ(\''+o.replace(/['"]/g,'')+'\','+oi+',\''+q.w.replace(/['"]/g,'')+'\')" >'+o+'</button>';}).join('')+'</div>';
}
function ansQ(val,idx,correct){
  var isCorr=val===correct;
  document.querySelectorAll('.q-opt').forEach(function(b){b.onclick=null;});
  document.getElementById('qo'+idx).classList.add(isCorr?'correct':'wrong');
  if(isCorr){QSCORE++;snd('ok');}else{snd('no');document.querySelectorAll('.q-opt').forEach(function(b){if(b.textContent.replace(/'/g,'').replace(/"/g,'')===correct)b.classList.add('correct');});}
  QIDX++;setTimeout(renderQ,900);
}
function showQResult(wrap){
  var pct=Math.round((QSCORE/QITEMS.length)*100);
  var stars=pct>=80?'‚≠ê‚≠ê‚≠ê':pct>=60?'‚≠ê‚≠ê':'‚≠ê';
  var msg=pct>=80?'Zabardast! üéâ':pct>=60?'Bahut Acha! üëè':'Aur practice karo! üí™';
  wrap.innerHTML='<div class="quiz-result"><div style="font-size:44px;animation:pop .4s ease;">'+stars+'</div><div style="font-family:Lilita One,cursive;font-size:24px;color:var(--a);">'+msg+'</div><div style="font-size:15px;font-weight:700;color:var(--sub);">'+QSCORE+' / '+QITEMS.length+' correct ('+pct+'%)</div><button class="quiz-start ripple-wrap" style="max-width:280px;" onclick="addRipple(event,this);startQuiz()">üîÑ Try Again</button><button class="quiz-start ripple-wrap" style="max-width:280px;background:linear-gradient(135deg,#4CAF50,#2E7D32);box-shadow:0 5px 0 #1B5E20;margin-top:6px;" onclick="addRipple(event,this);showPage(\'pgTopic\')">üìö Back</button></div>';
  confetti();snd(pct>=80?'win':'ok');addXP(pct>=80?15:pct>=60?10:5);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SETTINGS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function renderSettings(){
  var charEmo=CHARS.find(function(c){return c.id===U.avatar;})||CHARS[0];
  var av=document.getElementById('settAv');if(av)av.textContent=charEmo.e;
  var sn=document.getElementById('settName');if(sn)sn.textContent=U.name||'Player';
  var r=getRank(XP),nr=getNextRank(XP);
  var sr=document.getElementById('settRank');if(sr)sr.textContent=r.ico+' '+r.title;
  var sx=document.getElementById('settXP');if(sx)sx.textContent=XP;
  var ss=document.getElementById('settStreak');if(ss)ss.textContent=SK.count;
  var srd=document.getElementById('settReads');if(srd)srd.textContent=Object.values(STATS).reduce(function(a,b){return a+b;},0);
  // rank progress
  var rp=document.getElementById('rankProgressWrap');
  if(rp){
    var pct=nr?Math.round(((XP-r.min)/(nr.min-r.min))*100):100;
    rp.innerHTML='<div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:7px;"><div style="font-size:13px;font-weight:800;color:var(--text);">'+r.ico+' '+r.title+'</div>'+(nr?'<div style="font-size:11px;color:var(--sub);">‚Üí '+nr.ico+' '+nr.title+'</div>':'<div style="font-size:11px;color:#FFD700;font-weight:800;">MAX RANK! üëë</div>')+'</div><div class="xp-bar-bg" style="width:100%;height:10px;"><div class="xp-bar-fill" style="width:'+pct+'%;height:100%;background:linear-gradient(90deg,'+r.color+','+( nr?nr.color:r.color)+');"></div></div><div style="font-size:10px;color:var(--sub);margin-top:4px;">'+XP+' XP'+(nr?' ‚Ä¢ '+(nr.min-XP)+' to '+nr.title:'')+'</div>'+
    '<div style="margin-top:12px;display:flex;flex-wrap:wrap;gap:6px;">'+RANKS.map(function(rk){var reached=XP>=rk.min;return '<div style="display:flex;align-items:center;gap:4px;padding:4px 8px;border-radius:9px;background:'+(reached?'rgba(255,107,0,.12)':'rgba(0,0,0,.04)')+';border:2px solid '+(reached?'var(--a)':'transparent')+';"><span style="font-size:14px;">'+rk.ico+'</span><span style="font-size:10px;font-weight:800;color:'+(reached?'var(--a)':'#bbb')+';">'+rk.title+'</span><span style="font-size:9px;color:var(--sub);">('+rk.min+' XP)</span></div>';}).join('')+'</div>';
  }
  var bw=document.getElementById('badgesWrap');
  if(bw){bw.innerHTML='';BDEFS.forEach(function(b){var earned=BADGES.indexOf(b.id)>-1;var d=document.createElement('div');d.className='badge-chip'+(earned?'':' locked');d.innerHTML='<span style="font-size:15px">'+b.ico+'</span><span style="font-size:10px;font-weight:700;color:var(--text)">'+b.name+'</span>';bw.appendChild(d);});}
  var hl=document.getElementById('histList');
  if(hl){hl.innerHTML='';if(!HIST.length){hl.innerHTML='<div style="padding:11px;text-align:center;font-size:12px;color:#bbb;font-weight:700;">Abhi koi history nahi</div>';}else{HIST.slice(0,5).forEach(function(h){var d=document.createElement('div');d.className='hist-item';d.innerHTML='<div class="hist-thumb"><img src="'+h.t+'" onerror="this.parentElement.textContent=\'üìï\'" style="width:100%;height:100%;object-fit:cover;border-radius:6px;"></div><div style="flex:1;font-size:11px;font-weight:700;color:var(--text);">'+h.name+'</div><div style="font-size:10px;color:var(--sub);">'+h.date+'</div>';var c=COMICS.find(function(x){return x.id===h.id;});if(c)d.onclick=function(){openComic(c);};hl.appendChild(d);});}}
  var tc=document.getElementById('settTotal');if(tc){var hi=COMICS.filter(function(c){return c.lang==='hi'&&!c.isHidden;}).length,en=COMICS.filter(function(c){return c.lang==='en'&&!c.isHidden;}).length;tc.textContent=COMICS.filter(function(c){return !c.isHidden;}).length+' ('+hi+' Hindi, '+en+' English)';}
  var td=document.getElementById('td-'+U.theme);if(td){document.querySelectorAll('.tdot').forEach(function(x){x.classList.remove('on');});td.classList.add('on');}
  document.getElementById('darkToggle').classList.toggle('on',!!U.dark);
  document.getElementById('soundToggle').classList.toggle('on',!!U.sound);
  var lv=document.getElementById('langVal');if(lv)lv.textContent=U.lang==='hi'?'‡§π‡§ø‡§Ç‡§¶‡•Ä':'English';
  // inbox count
  var ic=document.getElementById('inboxCount');
  var unread=REPLIES.filter(function(r){return r.reply&&!r.userRead;}).length;
  if(ic)ic.textContent=unread>0?unread+' unread replies':'Dev replies aayenge yahan';
}
function setTheme(t){U.theme=t;saveU();applyTheme(t);document.querySelectorAll('.tdot').forEach(function(x){x.classList.remove('on');});var td=document.getElementById('td-'+t);if(td)td.classList.add('on');snd('tap');}
function applyTheme(t){document.body.className=document.body.className.replace(/theme-\w+/g,'').trim();if(t!=='orange')document.body.classList.add('theme-'+t);if(U.dark)document.body.classList.add('dark');}
function toggleDark(){U.dark=!U.dark;saveU();applyDark(U.dark);snd('tap');}
function applyDark(d){document.body.classList.toggle('dark',!!d);var t=document.getElementById('darkToggle');if(t)t.classList.toggle('on',!!d);}
function toggleSound(){U.sound=!U.sound;saveU();var t=document.getElementById('soundToggle');if(t)t.classList.toggle('on',U.sound);if(U.sound)snd('tap');}
function toggleLang(){U.lang=U.lang==='hi'?'en':'hi';saveU();}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê FEEDBACK ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function selectFbType(btn,t){FBTYPE=t;document.querySelectorAll('.fb-type-btn').forEach(function(b){b.classList.remove('sel');});btn.classList.add('sel');snd('tap');}
function submitFeedback(){
  var name=document.getElementById('fbName').value.trim()||U.name||'Anonymous';
  var msg=document.getElementById('fbMsg').value.trim();
  if(!msg){document.getElementById('fbMsg').style.animation='shake .3s ease';setTimeout(function(){document.getElementById('fbMsg').style.animation='';},400);return;}
  var entry={id:Date.now(),type:FBTYPE,name:name,msg:msg,time:new Date().toLocaleString(),reply:null,replyTime:null,userRead:false};
  FB.push(entry);ls('ch_fb',FB);
  // also add to replies so user can see it in inbox
  REPLIES.push(entry);ls('ch_rp',REPLIES);
  document.getElementById('fbMsg').value='';document.getElementById('fbName').value='';
  snd('ok');confetti();
  var fb=document.getElementById('fbMsg').closest('.fb-form');
  var orig=fb.innerHTML;
  fb.innerHTML='<div style="display:flex;flex-direction:column;align-items:center;justify-content:center;padding:50px 18px;text-align:center;gap:11px;"><div style="font-size:70px">üéâ</div><div style="font-family:Lilita One,cursive;font-size:22px;color:var(--a);">Message Pahunch Gaya!</div><div style="font-size:13px;color:var(--sub);font-weight:700;line-height:1.7;">Developer Baadal tak seedha<br>pahunch gaya hai! üôè<br><br>Reply ke liye Settings ‚Üí Inbox dekho üì•</div></div>';
  setTimeout(function(){fb.innerHTML=orig;document.querySelectorAll('.fb-type-btn')[0].classList.add('sel');},3800);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê DEV PANEL ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function tapLogo(){snd('tap');LTAPS++;clearTimeout(LTIMER);if(LTAPS>=5){LTAPS=0;openPwModal();}else{LTIMER=setTimeout(function(){LTAPS=0;},2000);}}
function openPwModal(){document.getElementById('pwIn').value='';document.getElementById('pwErr').textContent='';document.getElementById('pwModal').classList.add('show');setTimeout(function(){document.getElementById('pwIn').focus();},100);}
function closePwModal(){document.getElementById('pwModal').classList.remove('show');}
function checkPw(){var v=document.getElementById('pwIn').value;if(v===DEV_PW){DEV_ON=true;closePwModal();showPage('pgDev');renderDevPanel();snd('ok');}else{document.getElementById('pwErr').textContent='‚ùå Wrong password!';snd('no');}}
function devLock(){DEV_ON=false;showPage('pgHome');setNav('home');}
function renderDevPanel(){
  if(!DEV_ON)return;
  var tot=Object.values(STATS).reduce(function(a,b){return a+b;},0);
  document.getElementById('devStats').innerHTML='<div class="dev-stat"><div class="dev-stat-n">'+COMICS.filter(function(c){return !c.isHidden;}).length+'</div><div class="dev-stat-l">Comics</div></div><div class="dev-stat"><div class="dev-stat-n">'+tot+'</div><div class="dev-stat-l">Opens</div></div><div class="dev-stat"><div class="dev-stat-n">'+FB.length+'</div><div class="dev-stat-l">Msgs</div></div>';
  var sorted=COMICS.map(function(c){return {c:c,n:STATS[c.id]||0};}).sort(function(a,b){return b.n-a.n;}).slice(0,3);
  var mx=sorted[0]?sorted[0].n:1;var icons=['ü•á','ü•à','ü•â'];
  var t3=document.getElementById('devTop3');t3.innerHTML='<div style="font-size:10px;font-weight:700;color:#888;margin-bottom:7px;">TOP 3 MOST READ</div>';
  sorted.forEach(function(item,i){var d=document.createElement('div');d.style.cssText='display:flex;align-items:center;gap:7px;margin-bottom:6px;';d.innerHTML='<div style="font-size:16px;">'+icons[i]+'</div><div style="flex:1;"><div style="font-size:10px;color:#aaa;font-weight:700;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;">'+item.c.name+'</div><div style="height:6px;background:linear-gradient(90deg,var(--a),var(--a2));border-radius:3px;width:'+(mx>0?Math.round((item.n/mx)*100):0)+'%;"></div></div><div style="font-size:11px;color:#FFD700;font-weight:800;">'+item.n+'</div>';t3.appendChild(d);});
  document.getElementById('devCC').textContent='('+COMICS.length+')';
  var cl=document.getElementById('devComics');cl.innerHTML='';
  COMICS.forEach(function(c,i){var d=document.createElement('div');d.className='dev-cr';d.style.opacity=c.isHidden?'.5':'1';d.innerHTML='<div class="dev-cn">'+(c.isPinned?'üìå ':'')+(c.isNew?'üÜï ':'')+(c.isHidden?'üö´ ':'')+c.name+'</div><div class="dev-cm">'+c.lang.toUpperCase()+' ‚Ä¢ '+(c.date||'‚Äî')+' ‚Ä¢ '+(STATS[c.id]||0)+' opens</div><div class="dev-btns"><button class="dev-btn dbe" onclick="devEdit('+c.id+')">‚úèÔ∏è Edit</button><button class="dev-btn dbh" onclick="devHide('+c.id+')">'+(c.isHidden?'üëÅ':'üö´')+'</button><button class="dev-btn dbp" onclick="devPin('+c.id+')">'+(c.isPinned?'üìå Unpin':'üìå Pin')+'</button><button class="dev-btn dbn" onclick="devNew('+c.id+')">'+(c.isNew?'‚úÖ':'üÜï')+'</button>'+(i>0?'<button class="dev-btn dbu" onclick="devMove('+c.id+',-1)">‚¨Ü</button>':'')+(i<COMICS.length-1?'<button class="dev-btn dbu" onclick="devMove('+c.id+',1)">‚¨á</button>':'')+'<button class="dev-btn dbd" onclick="devDel('+c.id+')">üóë</button></div>';cl.appendChild(d);});
  document.getElementById('devAnnTxt').value=ANN.text||'';
  document.getElementById('devMaintT').classList.toggle('on',MAINT);
  var fl=document.getElementById('devFbList');fl.innerHTML='';
  document.getElementById('devFbC').textContent='('+FB.length+')';
  var icoMap={idea:'üí°',bug:'üêõ',msg:'üí¨',request:'üìñ'};
  if(!FB.length){fl.innerHTML='<div style="color:#888;font-size:12px;padding:8px;">No messages yet.</div>';}
  else{FB.slice().reverse().forEach(function(f){var d=document.createElement('div');d.className='fb-mi';
    var existing=REPLIES.find(function(r){return r.id===f.id;});
    d.innerHTML='<div class="fb-mt">'+(icoMap[f.type]||'üì©')+' '+f.type+'</div><div class="fb-mn">'+f.name+' ‚Ä¢ '+f.time+'</div><div class="fb-mm">'+f.msg+'</div>'+(existing&&existing.reply?'<div style="margin-top:5px;font-size:10px;color:#4CAF50;">‚úÖ Replied: '+existing.reply+'</div>':'')+'<div class="dev-reply-wrap"><input class="dev-reply-in" id="ri'+f.id+'" placeholder="Type reply..." value="'+(existing&&existing.reply?existing.reply:'')+'" /><button class="dev-reply-btn" onclick="devSendReply('+f.id+')">üì§ Reply</button></div>';
    fl.appendChild(d);});}
}
function devSendReply(fid){
  var inp=document.getElementById('ri'+fid);if(!inp)return;
  var reply=inp.value.trim();if(!reply){alert('Reply empty!');return;}
  var entry=REPLIES.find(function(r){return r.id===fid;});
  if(entry){entry.reply=reply;entry.replyTime=new Date().toLocaleString();entry.userRead=false;}
  ls('ch_rp',REPLIES);
  addNotif('üí¨ Baadal','Developer ne reply kiya: "'+reply.slice(0,40)+'"',true);
  snd('notif');renderDevPanel();alert('Reply sent! ‚úÖ');
}
function devAdd(){var name=document.getElementById('daN').value.trim(),url=document.getElementById('daU').value.trim(),lang=document.getElementById('daL').value,date=document.getElementById('daD').value.trim(),pages=parseInt(document.getElementById('daP').value)||0;if(!name||!url){alert('Name aur URL zaroori!');return;}var nid=Math.max.apply(null,COMICS.map(function(c){return c.id;}).concat([0]))+1;COMICS.push({id:nid,name:name,lang:lang,isNew:true,isPinned:false,isHidden:false,flipUrl:url,pages:pages||undefined,date:date||undefined});saveC();renderDevPanel();renderHome();checkNewBadge();document.getElementById('daN').value='';document.getElementById('daU').value='';document.getElementById('daD').value='';document.getElementById('daP').value='';snd('ok');addNotif('üìö','New comic added: '+name);alert('Comic add ho gaya! ‚úÖ');}
function devEdit(id){var c=COMICS.find(function(x){return x.id===id;});if(!c)return;var n=prompt('Name:',c.name);if(n===null)return;var da=prompt('Date:',c.date||'');var pg=prompt('Pages:',c.pages||'');c.name=n.trim()||c.name;c.date=da.trim()||c.date;c.pages=parseInt(pg)||c.pages;saveC();renderDevPanel();renderHome();}
function devHide(id){var c=COMICS.find(function(x){return x.id===id;});if(c){c.isHidden=!c.isHidden;saveC();renderDevPanel();renderHome();checkNewBadge();}}
function devPin(id){var c=COMICS.find(function(x){return x.id===id;});if(c){c.isPinned=!c.isPinned;saveC();renderDevPanel();renderHome();}}
function devNew(id){var c=COMICS.find(function(x){return x.id===id;});if(c){c.isNew=!c.isNew;saveC();renderDevPanel();checkNewBadge();}}
function devMove(id,dir){var idx=COMICS.findIndex(function(x){return x.id===id;});var ni=idx+dir;if(ni<0||ni>=COMICS.length)return;var tmp=COMICS[idx];COMICS[idx]=COMICS[ni];COMICS[ni]=tmp;saveC();renderDevPanel();renderHome();}
function devDel(id){if(!confirm('Delete?'))return;COMICS=COMICS.filter(function(x){return x.id!==id;});saveC();renderDevPanel();renderHome();checkNewBadge();}
function devSaveAnn(){ANN={active:true,text:document.getElementById('devAnnTxt').value.trim()};ls('ch_an',ANN);renderAnn();addNotif('üì¢',ANN.text);alert('Saved! ‚úÖ');}
function devHideAnn(){ANN.active=false;ls('ch_an',ANN);renderAnn();}
function devToggleMaint(){MAINT=!MAINT;ls('ch_mt',MAINT);document.getElementById('devMaintT').classList.toggle('on',MAINT);}
function devClearFb(){if(!confirm('Clear all feedback?'))return;FB=[];ls('ch_fb',FB);renderDevPanel();}
function devBackup(){var json=JSON.stringify(COMICS,null,2);document.getElementById('devRI').value=json;if(navigator.clipboard)navigator.clipboard.writeText(json).then(function(){alert('Copied! ‚úÖ');});else alert('JSON neeche hai.');}
function devRestore(){try{var p=JSON.parse(document.getElementById('devRI').value);if(!Array.isArray(p))throw 0;COMICS=p;saveC();renderDevPanel();renderHome();alert('Restored! ‚úÖ');}catch(e){alert('Invalid JSON!');}}
function devChangePass(){var p1=document.getElementById('devP1').value,p2=document.getElementById('devP2').value;if(!p1){alert('Password empty!');return;}if(p1!==p2){alert('Passwords match nahi!');return;}DEV_PW=p1;ls('ch_pw',DEV_PW);document.getElementById('devP1').value='';document.getElementById('devP2').value='';snd('ok');alert('Password changed! ‚úÖ');}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê NAV / PAGES ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function setNav(n){document.querySelectorAll('.nav-item').forEach(function(x){delete x.dataset.active;x.querySelector('.nav-ico').classList.remove('act-ico');});var el=document.getElementById('nav-'+n);if(el){el.dataset.active='1';el.querySelector('.nav-ico').classList.add('act-ico');}}
function showPage(id){document.querySelectorAll('.page').forEach(function(p){p.classList.remove('active');});document.getElementById(id).classList.add('active');}
function refreshPage(){var b=document.getElementById('refreshBtn');b.style.animation='spin .6s linear';setTimeout(function(){b.style.animation='';loadAll();renderHome();checkNewBadge();renderCOTD();updateRankDisplay();},700);snd('tap');}
function openLink(url){window.location.href=url;}

// INIT
(function(){
  try{var u=JSON.parse(localStorage.getItem('ch_u'));if(u&&u.dark)document.body.classList.add('dark');if(u&&u.theme&&u.theme!=='orange')document.body.classList.add('theme-'+u.theme);}catch(e){}
})();
</script>